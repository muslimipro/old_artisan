import{s as B}from"./index--vbnRBDJ.js";import{b as N,u as $,f as b,e as I,r as s,g as P,o as n,p as i,D as p,q as u,i as e,h as f,j as R,C as V,v as j,w as D}from"./index-AClBedbW.js";import{s as L}from"./index-SQHY2uKR.js";import{_ as T}from"./ClassesTable.vue_vue_type_script_setup_true_lang-DBS2lfxC.js";import{_ as q}from"./SchoolInfo.vue_vue_type_script_setup_true_lang-zgkthm45.js";import{S as d}from"./schoolApi-CR2RV8a3.js";import{m as A}from"./mapClassFromDto-BHXsJaNm.js";import"./index-CRBI1kF9.js";import"./index-BAEmVBEP.js";import"./index-eMhY5NLX.js";import"./index-BqfOP99U.js";import"./index-XWd1g6Xq.js";import"./index-CKslPvHa.js";import"./index-EYPUebmY.js";import"./index-DDx-e1KX.js";import"./index-3LekTigX.js";import"./index-Cz8lbA_9.js";import"./index-NBixiio1.js";import"./index-r2exBSIy.js";import"./index-BH7KoxWs.js";import"./index-DiNPzNfC.js";const F={class:"flex gap-2"},mo=N({__name:"SchoolOverviewPage",setup(M){const _=$(),l=V(),v=j(),h=b(),{userInfo:g}=I(h),a=s(!1),t=s(null);async function y(){try{a.value=!0;const{data:o}=await d.getSchoolById(Number(l.params.id));t.value=o}catch(o){console.log(o)}finally{a.value=!1}}const c=s([]),r=s(!1);async function C(){try{r.value=!0;const{data:o}=await d.getSchoolClassesById(Number(l.params.id));c.value=(o==null?void 0:o.map(A))??[]}catch(o){_.add({severity:"error",summary:o.response.data.error,life:2e3})}finally{r.value=!1}}return P(()=>{y(),C()}),(o,O)=>{const S=L,x=D,k=B;return n(),i(k,{class:"flex-grow flex flex-col gap-2"},{default:p(()=>[a.value?(n(),i(S,{key:0,class:"flex justify-center"})):u("",!0),t.value?(n(),i(e(q),{key:1,school:t.value},null,8,["school"])):u("",!0),f(e(T),{classes:c.value,loading:r.value},{actions:p(({row:w})=>[R("div",F,[f(x,{icon:"pi pi-angle-right",outlined:"",rounded:"",severity:"info",onClick:U=>{var m;return e(v).push({name:((m=e(g))==null?void 0:m.user_type)=="super_admin"?"admin-class":"supervisor-class",params:{id:w.id}})}},null,8,["onClick"])])]),_:1},8,["classes","loading"])]),_:1})}}});export{mo as default};
