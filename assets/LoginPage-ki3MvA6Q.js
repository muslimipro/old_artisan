import{h as S,z as f,s as j}from"./index-CYsXQvSY.js";import{b as N,a as T,u as q,A as L,r as h,o,c,h as e,j as t,D as r,t as n,i as p,p as y,k as P,q as R,F as k,l as D,v as M,aw as E,w as H}from"./index-mkT4Nz16.js";import{s as U}from"./index-Ad4f8rPI.js";import{s as G}from"./index-BjU41MJV.js";import{s as J}from"./index-BBe0MBJq.js";import{s as K}from"./index-CYFre0Ef.js";import{_ as O}from"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-D6SJHC7A.js";import{_ as Q}from"./AuthHeader.vue_vue_type_script_setup_true_lang-D9Z5MbNN.js";import"./index-Ce2l9Qw5.js";import"./index-Dp-E07Q-.js";import"./index-DPKHG_gJ.js";import"./index-CQVdX6EC.js";import"./language-DYQF8nnT.js";import"./logo-D1-3uCnC.js";const W={class:"card flex flex-col items-center pt-4"},X={class:"flex flex-1 items-center justify-center mt-4"},Y={class:"text-4xl font-semibold px-2"},Z={class:"flex flex-col gap-1"},ss={for:"email"},es={class:"flex flex-col gap-1"},as={for:"password"},ts={class:"flex justify-between"},os={class:"my-0 flex flex-col gap-1"},ls={key:1},hs=N({__name:"LoginPage",setup(is){const{t:m}=T(),$=q(),d=M(),_=L(),l=h(!1),V=h({email:"",password:""}),I=S(f.object({email:f.string().min(1,{message:m("pages.login.emailIsRequired")}).max(100,{message:m("pages.login.max100chars")}),password:f.string().min(1,{message:m("pages.login.passIsRequired")}).max(100,{message:m("pages.login.max100chars")})})),z=async s=>{if(!l.value&&s.valid){l.value=!0;try{const{data:a}=await E.login(s.states.email.value,s.states.password.value);_.setToken(a),_.setUser(a),d.push({name:"home2"})}catch(a){$.add({severity:"error",summary:a.response.data.error,life:3e3})}finally{l.value=!1}}};return(s,a)=>{const A=K,g=J,v=G,B=U,u=H,C=j;return o(),c(k,null,[e(Q),t("div",W,[e(C,{initialValues:V.value,resolver:p(I),onSubmit:z,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:r(i=>{var x,b;return[t("div",X,[t("p",Y,n(s.$t("logIn")),1)]),e(p(O),{class:"self-center"}),t("div",Z,[e(g,{variant:"on"},{default:r(()=>[e(A,{id:"email",name:"email",type:"text",fluid:""}),t("label",ss,n(s.$t("email")),1)]),_:1}),(x=i.email)!=null&&x.invalid?(o(),y(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[P(n(i.email.error.message),1)]),_:2},1024)):R("",!0)]),t("div",es,[e(g,{variant:"on"},{default:r(()=>[e(B,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),t("label",as,n(s.$t("password")),1)]),_:1}),t("div",ts,[(b=i.password)!=null&&b.invalid?(o(),y(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[t("ul",os,[(o(!0),c(k,null,D(i.password.errors,(w,F)=>(o(),c("li",{key:F},n(w.message),1))),128))])]),_:2},1024)):(o(),c("div",ls)),e(u,{label:s.$t("pages.login.forgotPassword"),variant:"link",size:"small",class:"p-0",onClick:a[0]||(a[0]=w=>p(d).push({name:"forgot-password"}))},null,8,["label"])])]),e(u,{type:"submit",label:s.$t("logIn"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),e(u,{variant:"link",label:s.$t("dontHaveAnAccount"),onClick:a[1]||(a[1]=i=>p(d).push({name:"signup"})),size:"small"},null,8,["label"])])],64)}}});export{hs as default};
