import{s as w}from"./index-uZyJKb9n.js";import{J as k,d as $,u as b,r as h,b as x,o as e,c as a,j as t,y as D,p as v,z as B,q as f,t as l,n as C,h as g,v as L,w as S,e as j,x as N,g as P,i as m,F as T,l as q}from"./index-mkT4Nz16.js";import{_ as I}from"./MainHeader.vue_vue_type_script_setup_true_lang-Tj42W6RU.js";import{T as M}from"./index-CV2rfB1h.js";import{s as V}from"./index-iH74k92p.js";import{s as z}from"./index-Ce2l9Qw5.js";import{L as A}from"./lessonApi-CF9NuSSx.js";import"./index-BSCV94xW.js";import"./index-Dp-E07Q-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-D1-3uCnC.js";const F={getDocs:R};async function R(){return await k.get("v2/docs")}const E=$("docs-store",()=>{const d=b(),s=h([]),r=h(!1);async function i(){try{r.value=!0;const{data:n}=await F.getDocs();s.value=n}catch(n){d.add({severity:"error",summary:n.response.data.error,life:2e3})}finally{r.value=!1}}return{docs:s,isLoading:r,loadDocs:i}}),J={class:"absolute top-0 left-0"},O={class:"flex gap-2 w-full h-full items-end"},G={class:"flex-grow flex flex-col gap-[2px]"},H={class:"flex items-center gap-2"},K={key:0,class:"text-purple-500 h-[22px] w-4"},Q={class:"text-body-large-semibold"},U={class:"pt-[10px] flex flex-col gap-1"},W={key:0},X={key:1},Y={key:2},Z=x({__name:"ModuleCard",props:{doc:{}},setup(d){const s=d,r=L(),i=()=>{s.doc.access_status==="available"&&r.push({name:s.doc.student_progress==100?"lesson-revise":"lesson",params:{id:s.doc.lesson_id},query:{route_id:s.doc.route_id}})};async function n(){s.doc.access_status==="available"&&(await A.resetLessonById(s.doc.lesson_id),r.push({name:"lesson",params:{id:s.doc.lesson_id},query:{route_id:s.doc.route_id}}))}return(o,c)=>{const p=S,_=z,u=V,y=M;return e(),a("div",{class:"relative flex flex-col rounded-lg h-[160px] w-[360px] pt-2 px-3 cursor-pointer bg-neutral50",onClick:i},[t("div",J,[o.doc.student_progress>0?D((e(),v(p,{key:0,icon:"pi pi-refresh",variant:"link",onClick:B(n,["stop","prevent"]),class:"text-warning400"},null,512)),[[y,o.$t("startOver"),void 0,{top:!0}]]):f("",!0)]),t("div",O,[t("div",G,[t("div",H,[s.doc.access_status==="premium_restriction"?(e(),a("div",K,c[0]||(c[0]=[t("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):f("",!0),t("div",Q,l(s.doc.lesson_name),1)])]),o.doc.source_image_url?(e(),v(_,{key:0,src:s.doc.source_image_url,alt:"Image",class:"w-[120px] h-[120px]"},null,8,["src"])):f("",!0)]),t("div",U,[t("div",{class:C(["action-small-bold","text-warning400"])},[o.doc.student_progress==100||o.doc.completed?(e(),a("span",W,l(o.$t("done")),1)):o.doc.student_progress==0?(e(),a("span",X,l(o.$t("start")),1)):(e(),a("span",Y,l(o.$t("inProgress")),1))]),g(u,{value:o.doc.student_progress,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:"var(--color-warning400)"},background:"var(--color-warning50)"}},null,8,["value"])])])}}}),ss={class:"flex flex-col items-center"},es={class:"w-full flex max-w-[1280px] px-8 py-10 justify-start"},os={class:"text-heading-2-bold text-neutral900"},ts={class:"w-full max-w-[1280px] px-8 pb-10"},as={key:1,class:"flex justify-center"},rs={key:2,class:"flex flex-col gap-8"},ns={class:"flex flex-wrap gap-6 bg-white p-6 rounded-2xl"},hs=x({__name:"DocsPage",setup(d){const s=E(),{docs:r,isLoading:i}=j(s),{loadDocs:n}=s,o=N(()=>{var c;return(c=r.value)==null?void 0:c.filter(p=>p.stage==="published")});return P(()=>n()),(c,p)=>{const _=w;return e(),a("div",ss,[g(m(I)),t("div",es,[t("div",os,l(c.$t("modules")),1)]),t("div",ts,[m(i)?(e(),v(_,{key:0,class:"flex justify-center"})):m(r)?(e(),a("div",rs,[t("div",ns,[(e(!0),a(T,null,q(o.value,u=>(e(),a("div",{key:u.lesson_id},[g(Z,{doc:u},null,8,["doc"])]))),128))])])):(e(),a("div",as,"No docs yet"))])])}}});export{hs as default};
