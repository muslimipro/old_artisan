import{s as N}from"./index-c6iTNCJH.js";import{b as P,u as V,f as D,e as F,r as o,g as I,o as p,c as R,h as s,D as u,p as g,q as y,i as a,j,F as L,C as T,v as U,w as q}from"./index-BwcPjnJP.js";import{s as A}from"./index-DWb5uelz.js";import{_ as E,a as M}from"./ExportProgressDialog.vue_vue_type_script_setup_true_lang-xdl9HjD3.js";import{_ as O}from"./SchoolInfo.vue_vue_type_script_setup_true_lang-CULhoyiN.js";import{S as h}from"./schoolApi-Ba4b9q6V.js";import{m as z}from"./mapClassFromDto-6vecsJoI.js";import"./index-CXxu4Mjq.js";import"./index-DH5eiR2q.js";import"./index-P7_tGZCZ.js";import"./index-J_wi4mxH.js";import"./index-Bht399_o.js";import"./index-X0HA0JnL.js";import"./index-w-z7np8T.js";import"./index-D9kQDm6b.js";import"./index-DqtVKoVZ.js";import"./index-C691Vja9.js";import"./index-B4dxx41c.js";import"./index-Bqa5yC9A.js";import"./index-MPBcGjo-.js";import"./index-BlHbwift.js";import"./index-D2oMMRm7.js";import"./mapRouteFromDto-10Zsm-pb.js";import"./mapLessonFromDto-D3cEBYeg.js";import"./mapUnitFromDto-DVWJHO4f.js";import"./transformUnitDtosToPages-hsgZNhAG.js";import"./lessonType-v5Tmr0TL.js";import"./mapStudentFromDto-D4MSietx.js";import"./index-OIP4ja8f.js";import"./index-BCI9kVQP.js";const G={class:"flex gap-2"},$e=P({__name:"SchoolOverviewPage",setup(H){const C=V(),d=T(),x=U(),S=D(),{userInfo:k}=F(S),i=o(!1),t=o(null);async function $(){try{i.value=!0;const{data:e}=await h.getSchoolById(Number(d.params.id));t.value=e}catch(e){console.log(e)}finally{i.value=!1}}const n=o([]),m=o(!1);async function B(){try{m.value=!0;const{data:e}=await h.getSchoolClassesById(Number(d.params.id));n.value=(e==null?void 0:e.map(z))??[]}catch(e){C.add({severity:"error",summary:e.response.data.error,life:2e3})}finally{m.value=!1}}I(()=>{$(),B()});const c=o(!1);return(e,r)=>{var v;const b=A,f=q,w=N;return p(),R(L,null,[s(w,{class:"flex-grow flex flex-col gap-2"},{default:u(()=>[i.value?(p(),g(b,{key:0,class:"flex justify-center"})):y("",!0),t.value?(p(),g(a(O),{key:1,school:t.value},null,8,["school"])):y("",!0),s(a(E),{classes:n.value,loading:m.value},{"header-extra":u(()=>[s(f,{label:e.$t("exportProgress"),icon:"pi pi-upload",severity:"info",variant:"outlined",class:"mr-2",onClick:r[0]||(r[0]=l=>c.value=!0)},null,8,["label"])]),actions:u(({row:l})=>[j("div",G,[s(f,{icon:"pi pi-angle-right",outlined:"",rounded:"",severity:"info",onClick:J=>{var _;return a(x).push({name:((_=a(k))==null?void 0:_.user_type)=="super_admin"?"admin-class":"supervisor-class",params:{id:l.id}})}},null,8,["onClick"])])]),_:1},8,["classes","loading"])]),_:1}),s(a(M),{"model-value":c.value,"onUpdate:modelValue":r[1]||(r[1]=l=>c.value=l),classes:n.value,"school-name":((v=t.value)==null?void 0:v.title_en)??""},null,8,["model-value","classes","school-name"])],64)}}});export{$e as default};
