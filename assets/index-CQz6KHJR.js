import{s as j}from"./index-3shJJ7Ww.js";import{d as B,u as L,r as k,b as T,o as s,c as l,j as o,y as C,p as R,z as I,n as w,q as g,t as i,h,v as P,w as S,e as A,g as D,x as N,i as c,F as x,l as b,C as F}from"./index-CrrKimau.js";import{_ as q}from"./MainHeader.vue_vue_type_script_setup_true_lang-CTfKWb-t.js";import{R as E,m as V}from"./mapRouteFromDto-GFbZzc0z.js";import{g as z}from"./groupLessonsByLevelAndType-B0Iu0b2E.js";import{T as M}from"./index-B2H5Bafp.js";import{s as U}from"./index-IRxqCVSs.js";import{s as O}from"./index-DL1ViM7W.js";import{L as G}from"./lessonApi-Bh_eeZwv.js";import"./index-kyck4Tmv.js";import"./index-D_2waQsa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-D1-3uCnC.js";import"./mapLessonFromDto-CG19vVOp.js";import"./mapUnitFromDto-DJ2zlrQL.js";import"./transformUnitDtosToPages-4blM3N0G.js";import"./index-Cxw2yqN5.js";const H=B("route-store",()=>{const y=L(),t=k(null),p=k({}),f=k(!1);async function r(e){var _,n;try{f.value=!0;const{data:a}=await E.getRouteById(e);t.value=V(a),p.value=z(((_=t.value)==null?void 0:_.lessons)??[],((n=t.value)==null?void 0:n.levels)??[])}catch(a){y.add({severity:"error",summary:a.response.data.error,life:2e3})}finally{f.value=!1}}return{selectedRoute:t,isRouteLoading:f,groupedLessons:p,loadRouteById:r}}),J={class:"absolute top-0 left-0"},K={class:"flex gap-2 w-full h-full items-end"},Q={class:"flex-grow flex flex-col gap-[2px]"},W={class:"text-overline-small"},X={class:"flex items-center gap-2"},Y={key:0,class:"text-purple-500 h-[22px] w-4"},Z={class:"text-body-large-semibold"},ee={class:"pt-[10px] flex flex-col gap-1"},se={key:0},oe={key:1},te={key:2},$=T({__name:"LessonCard",props:{lesson:{},route_id:{}},setup(y){const t=y,p=P(),f=()=>{t.lesson.accessStatus==="available"&&p.push({name:t.lesson.lessonType=="project"?"project":t.lesson.studentProgress==100?"lesson-revise":"lesson",params:{id:t.lesson.id},query:{route_id:t.route_id}})};async function r(){t.lesson.accessStatus==="available"&&(await G.resetLessonById(t.lesson.id),p.push({name:t.lesson.lessonType=="project"?"project":"lesson",params:{id:t.lesson.id},query:{route_id:t.route_id}}))}return(e,_)=>{const n=S,a=O,v=U,d=M;return s(),l("div",{class:w(["flex flex-col rounded-lg h-[160px] w-[348px] pt-2 px-3 cursor-pointer relative",e.lesson.accessStatus=="available"?e.lesson.lessonType=="learn"?"bg-[var(--color-purple50)]":e.lesson.lessonType=="practice"?"bg-[var(--color-primary50)]":"bg-slate-50":e.lesson.lessonType=="learn"?"bg-[var(--color-purple50)] bg-opacity-50":"bg-[var(--color-primary50)] bg-opacity-50"]),onClick:f},[o("div",J,[e.lesson.studentProgress>0?C((s(),R(n,{key:0,icon:"pi pi-refresh",variant:"link",onClick:I(r,["stop","prevent"]),class:w(e.lesson.lessonType=="learn"?"text-purple400":"text-primary400")},null,8,["class"])),[[d,e.$t("startOver"),void 0,{top:!0}]]):g("",!0)]),o("div",K,[o("div",Q,[o("div",W,i(e.lesson.description),1),o("div",X,[e.lesson.accessStatus==="premium_restriction"?(s(),l("div",Y,_[0]||(_[0]=[o("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):g("",!0),o("div",Z,i(e.lesson.name),1)])]),t.lesson.sourceImageUrl?(s(),R(a,{key:0,src:t.lesson.sourceImageUrl,alt:"Image",class:"min-w-[120px] min-h-[120px] w-[120px] h-[120px]"},null,8,["src"])):g("",!0)]),o("div",ee,[o("div",{class:w(["action-small-bold",e.lesson.lessonType=="learn"?"text-purple400":"text-primary400"])},[e.lesson.studentProgress==100||e.lesson.completed?(s(),l("span",se,i(e.$t("done")),1)):e.lesson.studentProgress==0?(s(),l("span",oe,i(e.$t("start")),1)):(s(),l("span",te,i(e.$t("inProgress")),1))],2),h(v,{value:e.lesson.studentProgress,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:e.lesson.lessonType=="learn"?"var(--color-purple400)":"var(--color-primary400)"},background:e.lesson.lessonType=="learn"?"#CBBEFD":"#A9EAD8"}},null,8,["value","dt"])])],2)}}}),le={class:"flex flex-col items-center"},re={class:"w-full max-w-[1280px] px-8 py-10"},ae={key:1,class:"flex justify-center"},ne={key:2,class:"flex flex-col gap-8"},ie={class:"flex gap-[52px] p-6 bg-white rounded-2xl"},ce={class:"flex flex-col"},de={class:"text-heading-3-semibold"},pe={class:"text-lg text-gray-500"},ue={class:"text-heading-3-semibold text-neutral500 px-6"},me={key:0,class:"flex flex-col w-full bg-white p-6 rounded-2xl gap-4"},fe={class:"text-heading-4-semibold text-neutral600"},_e={class:"flex overflow-x-scroll gap-4"},ve={key:1,class:"flex flex-col w-full bg-white p-6 rounded-2xl gap-4"},ge={class:"text-heading-4-semibold text-neutral600"},he={class:"flex overflow-x-scroll gap-4"},ye={key:2,class:"flex flex-col w-full bg-white p-6 rounded-2xl gap-4"},xe={class:"text-heading-4-semibold text-neutral600"},be={class:"flex flex-wrap gap-4"},Ee=T({__name:"RoutePage",setup(y){const t=F(),p=H(),{isRouteLoading:f,selectedRoute:r,groupedLessons:e}=A(p),{loadRouteById:_}=p;D(()=>_(Number(t.params.id)));const n=N(()=>{const a={};for(const v in e.value)a[v]={learn:e.value[v].learn.filter(d=>d.stage==="published"),practice:e.value[v].practice.filter(d=>d.stage==="published"),project:e.value[v].project.filter(d=>d.stage==="published")};return a});return(a,v)=>{const d=j;return s(),l("div",le,[h(c(q)),o("div",re,[c(f)?(s(),R(d,{key:0,class:"flex justify-center"})):c(r)?(s(),l("div",ne,[o("div",ie,[o("div",ce,[o("div",de,i(c(r).name),1),o("div",pe,i(c(r).description),1)])]),(s(!0),l(x,null,b(c(r).levels,u=>(s(),l("div",{key:u.id,class:"flex flex-col gap-4"},[o("div",ue,i(u.name),1),n.value[u.id].learn.length>0?(s(),l("div",me,[o("div",fe,i(a.$t("pages.projects.learn")),1),o("div",_e,[(s(!0),l(x,null,b(n.value[u.id].learn,m=>(s(),l("div",{key:m.id},[h($,{lesson:m,route_id:c(r).id},null,8,["lesson","route_id"])]))),128))])])):g("",!0),n.value[u.id].practice.length>0?(s(),l("div",ve,[o("div",ge,i(a.$t("pages.projects.practice")),1),o("div",he,[(s(!0),l(x,null,b(n.value[u.id].practice,m=>(s(),l("div",{key:m.id},[h($,{lesson:m,route_id:c(r).id},null,8,["lesson","route_id"])]))),128))])])):g("",!0),c(r).routeType=="hackathon"&&n.value[u.id].project.length>0?(s(),l("div",ye,[o("div",xe,i(a.$t("project")),1),o("div",be,[(s(!0),l(x,null,b(n.value[u.id].project,m=>(s(),l("div",{key:m.id},[h($,{lesson:m,route_id:c(r).id},null,8,["lesson","route_id"])]))),128))])])):g("",!0)]))),128))])):(s(),l("div",ae,"No route found"))])])}}});export{Ee as default};
