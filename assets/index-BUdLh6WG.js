import{B as X,m as I,o as d,p as k,D as S,y as ae,X as j,j as b,V as N,Y as qe,q as V,T as Je,n as W,s as te,Z as We,_ as Le,$ as Ye,a0 as Qe,a1 as Xe,a2 as Ve,a3 as ue,c as w,F as K,l as Q,h as p,t as ee,J as M,b as L,a4 as Be,a5 as we,r as $,x as he,g as G,E,w as F,a6 as _e,i as A,C as Y,d as Ze,u as et,e as H,a7 as tt,v as $e,L as ke,z as xe,Q as nt,R as ot,k as fe,A as at}from"./index-BNOYZ_6B.js";import{_ as it}from"./EditLocaleSelector.vue_vue_type_script_setup_true_lang-LTQc_kWP.js";import{u as Ae}from"./useLocaleStore-DrFpjh-G.js";import{L as De}from"./lessonApi-DJ332M2h.js";import{m as lt}from"./mapLessonFromDto-CG19vVOp.js";import{U as Z}from"./unitApi-CO-UTFqE.js";import{s as st}from"./index-BYGD4QnV.js";import{s as Ee}from"./index-c6uuw81K.js";import{s as rt}from"./index-EmM3D-m5.js";import{d as ct}from"./defaultConfirmDeleteOptions-BHu3VNzp.js";import{s as dt}from"./index-C4TRSEyf.js";import"./store-DTC7bVf7.js";import{_ as pe,T as Re}from"./CodeEditorView.vue_vue_type_script_setup_true_lang-DPho1RON.js";import{s as Ne,a as je}from"./index-BHK97OKv.js";import{s as ut}from"./index-fTHW6IpW.js";import{s as ve}from"./index-DRhII8mO.js";import{s as He}from"./index-Ym3p4DeK.js";import{C as Fe}from"./cloudStorageApi-DS2KYLed.js";import{_ as pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as vt}from"./index-CFd-0ZWH.js";import{s as ht}from"./index-SW19hvKn.js";import{s as Ce}from"./index-nGXgVu-X.js";import{s as ft}from"./index-C__XJ6ti.js";import{A as ie}from"./language-DYQF8nnT.js";import{u as gt}from"./index-fSFpeyui.js";import{s as mt}from"./index-CoDkBE5V.js";import{s as bt}from"./index-DpCksB_j.js";import{T as yt}from"./index-BjTXdGTl.js";import{s as wt}from"./index-BTepqiGI.js";import"./mapUnitFromDto-DJ2zlrQL.js";import"./transformUnitDtosToPages-4blM3N0G.js";import"./index-DlyffbqJ.js";import"./index-B1Mvx7RV.js";import"./index-DgBnIJKd.js";import"./index-BZSE8JAR.js";import"./index-CAA1rma3.js";var _t={root:"p-accordioncontent",content:"p-accordioncontent-content"},$t=X.extend({name:"accordioncontent",classes:_t}),kt={name:"BaseAccordionContent",extends:te,props:{as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:$t,provide:function(){return{$pcAccordionContent:this,$parentInstance:this}}},Pe={name:"AccordionContent",extends:kt,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},ariaLabelledby:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},attrs:function(){return I(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{id:this.id,role:"region","aria-labelledby":this.ariaLabelledby,"data-pc-name":"accordioncontent","data-p-active":this.$pcAccordionPanel.active}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}}};function xt(t,n,e,i,s,o){return t.asChild?N(t.$slots,"default",{key:1,class:W(t.cx("root")),active:o.$pcAccordionPanel.active,a11yAttrs:o.a11yAttrs}):(d(),k(Je,I({key:0,name:"p-toggleable-content"},t.ptm("transition",o.ptParams)),{default:S(function(){return[!o.$pcAccordion.lazy||o.$pcAccordionPanel.active?ae((d(),k(j(t.as),I({key:0,class:t.cx("root")},o.attrs),{default:S(function(){return[b("div",I({class:t.cx("content")},t.ptm("content",o.ptParams)),[N(t.$slots,"default")],16)]}),_:3},16,["class"])),[[qe,o.$pcAccordion.lazy?!0:o.$pcAccordionPanel.active]]):V("",!0)]}),_:3},16))}Pe.render=xt;var At={root:"p-accordionheader",toggleicon:"p-accordionheader-toggle-icon"},Ct=X.extend({name:"accordionheader",classes:At}),Pt={name:"BaseAccordionHeader",extends:te,props:{as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:Ct,provide:function(){return{$pcAccordionHeader:this,$parentInstance:this}}},Te={name:"AccordionHeader",extends:Pt,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],methods:{onFocus:function(){this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(n){switch(n.code){case"ArrowDown":this.onArrowDownKey(n);break;case"ArrowUp":this.onArrowUpKey(n);break;case"Home":this.onHomeKey(n);break;case"End":this.onEndKey(n);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(n);break}},onArrowDownKey:function(n){var e=this.findNextPanel(this.findPanel(n.currentTarget));e?this.changeFocusedPanel(n,e):this.onHomeKey(n),n.preventDefault()},onArrowUpKey:function(n){var e=this.findPrevPanel(this.findPanel(n.currentTarget));e?this.changeFocusedPanel(n,e):this.onEndKey(n),n.preventDefault()},onHomeKey:function(n){var e=this.findFirstPanel();this.changeFocusedPanel(n,e),n.preventDefault()},onEndKey:function(n){var e=this.findLastPanel();this.changeFocusedPanel(n,e),n.preventDefault()},onEnterKey:function(n){this.changeActiveValue(),n.preventDefault()},findPanel:function(n){return n==null?void 0:n.closest('[data-pc-name="accordionpanel"]')},findHeader:function(n){return We(n,'[data-pc-name="accordionheader"]')},findNextPanel:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e?n:n.nextElementSibling;return i?Le(i,"data-p-disabled")?this.findNextPanel(i):this.findHeader(i):null},findPrevPanel:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e?n:n.previousElementSibling;return i?Le(i,"data-p-disabled")?this.findPrevPanel(i):this.findHeader(i):null},findFirstPanel:function(){return this.findNextPanel(this.$pcAccordion.$el.firstElementChild,!0)},findLastPanel:function(){return this.findPrevPanel(this.$pcAccordion.$el.lastElementChild,!0)},changeActiveValue:function(){this.$pcAccordion.updateValue(this.$pcAccordionPanel.value)},changeFocusedPanel:function(n,e){Ye(this.findHeader(e))}},computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},ariaControls:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},attrs:function(){return I(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.$pcAccordionPanel.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.$pcAccordion.tabindex,"aria-expanded":this.$pcAccordionPanel.active,"aria-controls":this.ariaControls,"data-pc-name":"accordionheader","data-p-disabled":this.$pcAccordionPanel.disabled,"data-p-active":this.$pcAccordionPanel.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}},components:{ChevronUpIcon:Ee,ChevronDownIcon:rt},directives:{ripple:Qe}};function Tt(t,n,e,i,s,o){var a=Xe("ripple");return t.asChild?N(t.$slots,"default",{key:1,class:W(t.cx("root")),active:o.$pcAccordionPanel.active,a11yAttrs:o.a11yAttrs,onClick:o.onClick}):ae((d(),k(j(t.as),I({key:0,class:t.cx("root"),onClick:o.onClick},o.attrs),{default:S(function(){return[N(t.$slots,"default",{active:o.$pcAccordionPanel.active}),N(t.$slots,"toggleicon",{active:o.$pcAccordionPanel.active,class:W(t.cx("toggleicon"))},function(){return[o.$pcAccordionPanel.active?(d(),k(j(o.$pcAccordion.$slots.collapseicon?o.$pcAccordion.$slots.collapseicon:o.$pcAccordion.collapseIcon?"span":"ChevronDownIcon"),I({key:0,class:[o.$pcAccordion.collapseIcon,t.cx("toggleicon")],"aria-hidden":"true"},t.ptm("toggleicon",o.ptParams)),null,16,["class"])):(d(),k(j(o.$pcAccordion.$slots.expandicon?o.$pcAccordion.$slots.expandicon:o.$pcAccordion.expandIcon?"span":"ChevronUpIcon"),I({key:1,class:[o.$pcAccordion.expandIcon,t.cx("toggleicon")],"aria-hidden":"true"},t.ptm("toggleicon",o.ptParams)),null,16,["class"]))]})]}),_:3},16,["class","onClick"])),[[a]])}Te.render=Tt;var St={root:function(n){var e=n.instance,i=n.props;return["p-accordionpanel",{"p-accordionpanel-active":e.active,"p-disabled":i.disabled}]}},Ut=X.extend({name:"accordionpanel",classes:St}),It={name:"BaseAccordionPanel",extends:te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:Ut,provide:function(){return{$pcAccordionPanel:this,$parentInstance:this}}},Se={name:"AccordionPanel",extends:It,inheritAttrs:!1,inject:["$pcAccordion"],computed:{active:function(){return this.$pcAccordion.isItemActive(this.value)},attrs:function(){return I(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{"data-pc-name":"accordionpanel","data-p-disabled":this.disabled,"data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function Lt(t,n,e,i,s,o){return t.asChild?N(t.$slots,"default",{key:1,class:W(t.cx("root")),active:o.active,a11yAttrs:o.a11yAttrs}):(d(),k(j(t.as),I({key:0,class:t.cx("root")},o.attrs),{default:S(function(){return[N(t.$slots,"default")]}),_:3},16,["class"]))}Se.render=Lt;var Vt=function(n){var e=n.dt;return`
.p-accordionpanel {
    display: flex;
    flex-direction: column;
    border-style: solid;
    border-width: `.concat(e("accordion.panel.border.width"),`;
    border-color: `).concat(e("accordion.panel.border.color"),`;
}

.p-accordionheader {
    all: unset;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: `).concat(e("accordion.header.padding"),`;
    color: `).concat(e("accordion.header.color"),`;
    background: `).concat(e("accordion.header.background"),`;
    border-style: solid;
    border-width: `).concat(e("accordion.header.border.width"),`;
    border-color: `).concat(e("accordion.header.border.color"),`;
    font-weight: `).concat(e("accordion.header.font.weight"),`;
    border-radius: `).concat(e("accordion.header.border.radius"),`;
    transition: background `).concat(e("accordion.transition.duration"),"; color ").concat(e("accordion.transition.duration"),"color ").concat(e("accordion.transition.duration"),", outline-color ").concat(e("accordion.transition.duration"),", box-shadow ").concat(e("accordion.transition.duration"),`;
    outline-color: transparent;
}

.p-accordionpanel:first-child > .p-accordionheader {
    border-width: `).concat(e("accordion.header.first.border.width"),`;
    border-start-start-radius: `).concat(e("accordion.header.first.top.border.radius"),`;
    border-start-end-radius: `).concat(e("accordion.header.first.top.border.radius"),`;
}

.p-accordionpanel:last-child > .p-accordionheader {
    border-end-start-radius: `).concat(e("accordion.header.last.bottom.border.radius"),`;
    border-end-end-radius: `).concat(e("accordion.header.last.bottom.border.radius"),`;
}

.p-accordionpanel:last-child.p-accordionpanel-active > .p-accordionheader {
    border-end-start-radius: `).concat(e("accordion.header.last.active.bottom.border.radius"),`;
    border-end-end-radius: `).concat(e("accordion.header.last.active.bottom.border.radius"),`;
}

.p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.color"),`;
}

.p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {
    box-shadow: `).concat(e("accordion.header.focus.ring.shadow"),`;
    outline: `).concat(e("accordion.header.focus.ring.width")," ").concat(e("accordion.header.focus.ring.style")," ").concat(e("accordion.header.focus.ring.color"),`;
    outline-offset: `).concat(e("accordion.header.focus.ring.offset"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) > .p-accordionheader:hover {
    background: `).concat(e("accordion.header.hover.background"),`;
    color: `).concat(e("accordion.header.hover.color"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader {
    background: `).concat(e("accordion.header.active.background"),`;
    color: `).concat(e("accordion.header.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover {
    background: `).concat(e("accordion.header.active.hover.background"),`;
    color: `).concat(e("accordion.header.active.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.active.hover.color"),`;
}

.p-accordioncontent-content {
    border-style: solid;
    border-width: `).concat(e("accordion.content.border.width"),`;
    border-color: `).concat(e("accordion.content.border.color"),`;
    background-color: `).concat(e("accordion.content.background"),`;
    color: `).concat(e("accordion.content.color"),`;
    padding: `).concat(e("accordion.content.padding"),`;
}
`)},Bt={root:"p-accordion p-component"},Dt=X.extend({name:"accordion",theme:Vt,classes:Bt}),Ft={name:"BaseAccordion",extends:te,props:{value:{type:[String,Number,Array],default:void 0},multiple:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},expandIcon:{type:String,default:void 0},collapseIcon:{type:String,default:void 0},activeIndex:{type:[Number,Array],default:null}},style:Dt,provide:function(){return{$pcAccordion:this,$parentInstance:this}}},Oe={name:"Accordion",extends:Ft,inheritAttrs:!1,emits:["update:value","update:activeIndex","tab-open","tab-close","tab-click"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(n){this.id=n||Ve()},value:function(n){this.d_value=n},activeIndex:{immediate:!0,handler:function(n){this.hasAccordionTab&&(this.d_value=this.multiple?n==null?void 0:n.map(String):n==null?void 0:n.toString())}}},mounted:function(){this.id=this.id||Ve()},methods:{isItemActive:function(n){var e;return this.multiple?(e=this.d_value)===null||e===void 0?void 0:e.includes(n):this.d_value===n},updateValue:function(n){var e,i=this.isItemActive(n);this.multiple?i?this.d_value=this.d_value.filter(function(s){return s!==n}):this.d_value?this.d_value.push(n):this.d_value=[n]:this.d_value=i?null:n,this.$emit("update:value",this.d_value),this.$emit("update:activeIndex",this.multiple?(e=this.d_value)===null||e===void 0?void 0:e.map(Number):Number(this.d_value)),this.$emit(i?"tab-close":"tab-open",{originalEvent:void 0,index:Number(n)})},isAccordionTab:function(n){return n.type.name==="AccordionTab"},getTabProp:function(n,e){return n.props?n.props[e]:void 0},getKey:function(n,e){return this.getTabProp(n,"header")||e},getHeaderPT:function(n,e){var i=this;return{root:I({onClick:function(o){return i.onTabClick(o,e)}},this.getTabProp(n,"headerProps"),this.getTabPT(n,"header",e)),toggleicon:I(this.getTabProp(n,"headeractionprops"),this.getTabPT(n,"headeraction",e))}},getContentPT:function(n,e){return{root:I(this.getTabProp(n,"contentProps"),this.getTabPT(n,"toggleablecontent",e)),transition:this.getTabPT(n,"transition",e),content:this.getTabPT(n,"content",e)}},getTabPT:function(n,e,i){var s=this.tabs.length,o={props:n.props||{},parent:{instance:this,props:this.$props,state:this.$data},context:{index:i,count:s,first:i===0,last:i===s-1,active:this.isItemActive("".concat(i))}};return I(this.ptm("accordiontab.".concat(e),o),this.ptmo(this.getTabProp(n,"pt"),e,o))},onTabClick:function(n,e){this.$emit("tab-click",{originalEvent:n,index:e})}},computed:{tabs:function(){var n=this;return this.$slots.default().reduce(function(e,i){return n.isAccordionTab(i)?e.push(i):i.children&&i.children instanceof Array&&i.children.forEach(function(s){n.isAccordionTab(s)&&e.push(s)}),e},[])},hasAccordionTab:function(){return this.tabs.length}},components:{AccordionPanel:Se,AccordionHeader:Te,AccordionContent:Pe,ChevronUpIcon:Ee,ChevronRightIcon:st}};function zt(t,n,e,i,s,o){var a=ue("AccordionHeader"),l=ue("AccordionContent"),u=ue("AccordionPanel");return d(),w("div",I({class:t.cx("root")},t.ptmi("root")),[o.hasAccordionTab?(d(!0),w(K,{key:0},Q(o.tabs,function(c,r){return d(),k(u,{key:o.getKey(c,r),value:"".concat(r),pt:{root:o.getTabPT(c,"root",r)},disabled:o.getTabProp(c,"disabled")},{default:S(function(){return[p(a,{class:W(o.getTabProp(c,"headerClass")),pt:o.getHeaderPT(c,r)},{toggleicon:S(function(m){return[m.active?(d(),k(j(t.$slots.collapseicon?t.$slots.collapseicon:t.collapseIcon?"span":"ChevronDownIcon"),I({key:0,class:[t.collapseIcon,m.class],"aria-hidden":"true",ref_for:!0},o.getTabPT(c,"headericon",r)),null,16,["class"])):(d(),k(j(t.$slots.expandicon?t.$slots.expandicon:t.expandIcon?"span":"ChevronUpIcon"),I({key:1,class:[t.expandIcon,m.class],"aria-hidden":"true",ref_for:!0},o.getTabPT(c,"headericon",r)),null,16,["class"]))]}),default:S(function(){return[c.children&&c.children.headericon?(d(),k(j(c.children.headericon),{key:0,isTabActive:o.isItemActive("".concat(r)),active:o.isItemActive("".concat(r)),index:r},null,8,["isTabActive","active","index"])):V("",!0),c.props&&c.props.header?(d(),w("span",I({key:1,ref_for:!0},o.getTabPT(c,"headertitle",r)),ee(c.props.header),17)):V("",!0),c.children&&c.children.header?(d(),k(j(c.children.header),{key:2})):V("",!0)]}),_:2},1032,["class","pt"]),p(l,{pt:o.getContentPT(c,r)},{default:S(function(){return[(d(),k(j(c)))]}),_:2},1032,["pt"])]}),_:2},1032,["value","pt","disabled"])}),128)):N(t.$slots,"default",{key:1})],16)}Oe.render=zt;var Et=function(n){var e=n.dt;return`
.p-inputgroup,
.p-inputgroup .p-iconfield,
.p-inputgroup .p-floatlabel,
.p-inputgroup .p-iftalabel {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroup .p-inputtext,
.p-inputgroup .p-inputwrapper {
    flex: 1 1 auto;
    width: 1%;
}

.p-inputgroupaddon {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: `.concat(e("inputgroup.addon.padding"),`;
    background: `).concat(e("inputgroup.addon.background"),`;
    color: `).concat(e("inputgroup.addon.color"),`;
    border-block-start: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
    border-block-end: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
    min-width: `).concat(e("inputgroup.addon.min.width"),`;
}

.p-inputgroupaddon:first-child,
.p-inputgroupaddon + .p-inputgroupaddon {
    border-inline-start: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:last-child {
    border-inline-end: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:has(.p-button) {
    padding: 0;
    overflow: hidden;
}

.p-inputgroupaddon .p-button {
    border-radius: 0;
}

.p-inputgroup > .p-component,
.p-inputgroup > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iconfield > .p-component,
.p-inputgroup > .p-floatlabel > .p-component,
.p-inputgroup > .p-floatlabel > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel > .p-component,
.p-inputgroup > .p-iftalabel > .p-inputwrapper > .p-component {
    border-radius: 0;
    margin: 0;
}

.p-inputgroupaddon:first-child,
.p-inputgroup > .p-component:first-child,
.p-inputgroup > .p-inputwrapper:first-child > .p-component,
.p-inputgroup > .p-iconfield:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-inputwrapper > .p-component {
    border-start-start-radius: `).concat(e("inputgroup.addon.border.radius"),`;
    border-end-start-radius: `).concat(e("inputgroup.addon.border.radius"),`;
}

.p-inputgroupaddon:last-child,
.p-inputgroup > .p-component:last-child,
.p-inputgroup > .p-inputwrapper:last-child > .p-component,
.p-inputgroup > .p-iconfield:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-inputwrapper > .p-component {
    border-start-end-radius: `).concat(e("inputgroup.addon.border.radius"),`;
    border-end-end-radius: `).concat(e("inputgroup.addon.border.radius"),`;
}

.p-inputgroup .p-component:focus,
.p-inputgroup .p-component.p-focus,
.p-inputgroup .p-inputwrapper-focus,
.p-inputgroup .p-component:focus ~ label,
.p-inputgroup .p-component.p-focus ~ label,
.p-inputgroup .p-inputwrapper-focus ~ label {
    z-index: 1;
}

.p-inputgroup > .p-button:not(.p-button-icon-only) {
    width: auto;
}

.p-inputgroup .p-iconfield + .p-iconfield .p-inputtext {
    border-inline-start: 0;
}
`)},Rt={root:"p-inputgroup"},Nt=X.extend({name:"inputgroup",theme:Et,classes:Rt}),jt={name:"BaseInputGroup",extends:te,style:Nt,provide:function(){return{$pcInputGroup:this,$parentInstance:this}}},Ke={name:"InputGroup",extends:jt,inheritAttrs:!1};function Ht(t,n,e,i,s,o){return d(),w("div",I({class:t.cx("root")},t.ptmi("root")),[N(t.$slots,"default")],16)}Ke.render=Ht;var Ot={root:"p-inputgroupaddon"},Kt=X.extend({name:"inputgroupaddon",classes:Ot}),Mt={name:"BaseInputGroupAddon",extends:te,style:Kt,provide:function(){return{$pcInputGroupAddon:this,$parentInstance:this}}},Me={name:"InputGroupAddon",extends:Mt,inheritAttrs:!1};function Gt(t,n,e,i,s,o){return d(),w("div",I({class:t.cx("root")},t.ptmi("root")),[N(t.$slots,"default")],16)}Me.render=Gt;var qt=function(n){var e=n.dt;return`
.p-toggleswitch {
    display: inline-block;
    width: `.concat(e("toggleswitch.width"),`;
    height: `).concat(e("toggleswitch.height"),`;
}

.p-toggleswitch-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border-radius: `).concat(e("toggleswitch.border.radius"),`;
}

.p-toggleswitch-slider {
    display: inline-block;
    cursor: pointer;
    width: 100%;
    height: 100%;
    border-width: `).concat(e("toggleswitch.border.width"),`;
    border-style: solid;
    border-color: `).concat(e("toggleswitch.border.color"),`;
    background: `).concat(e("toggleswitch.background"),`;
    transition: background `).concat(e("toggleswitch.transition.duration"),", color ").concat(e("toggleswitch.transition.duration"),", border-color ").concat(e("toggleswitch.transition.duration"),", outline-color ").concat(e("toggleswitch.transition.duration"),", box-shadow ").concat(e("toggleswitch.transition.duration"),`;
    border-radius: `).concat(e("toggleswitch.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(e("toggleswitch.shadow"),`;
}

.p-toggleswitch-handle {
    position: absolute;
    top: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: `).concat(e("toggleswitch.handle.background"),`;
    color: `).concat(e("toggleswitch.handle.color"),`;
    width: `).concat(e("toggleswitch.handle.size"),`;
    height: `).concat(e("toggleswitch.handle.size"),`;
    inset-inline-start: `).concat(e("toggleswitch.gap"),`;
    margin-block-start: calc(-1 * calc(`).concat(e("toggleswitch.handle.size"),` / 2));
    border-radius: `).concat(e("toggleswitch.handle.border.radius"),`;
    transition: background `).concat(e("toggleswitch.transition.duration"),", color ").concat(e("toggleswitch.transition.duration"),", inset-inline-start ").concat(e("toggleswitch.slide.duration"),", box-shadow ").concat(e("toggleswitch.slide.duration"),`;
}

.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.checked.background"),`;
    border-color: `).concat(e("toggleswitch.checked.border.color"),`;
}

.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.checked.background"),`;
    color: `).concat(e("toggleswitch.handle.checked.color"),`;
    inset-inline-start: calc(`).concat(e("toggleswitch.width")," - calc(").concat(e("toggleswitch.handle.size")," + ").concat(e("toggleswitch.gap"),`));
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.hover.background"),`;
    border-color: `).concat(e("toggleswitch.hover.border.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.hover.background"),`;
    color: `).concat(e("toggleswitch.handle.hover.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.checked.hover.background"),`;
    border-color: `).concat(e("toggleswitch.checked.hover.border.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.checked.hover.background"),`;
    color: `).concat(e("toggleswitch.handle.checked.hover.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible) .p-toggleswitch-slider {
    box-shadow: `).concat(e("toggleswitch.focus.ring.shadow"),`;
    outline: `).concat(e("toggleswitch.focus.ring.width")," ").concat(e("toggleswitch.focus.ring.style")," ").concat(e("toggleswitch.focus.ring.color"),`;
    outline-offset: `).concat(e("toggleswitch.focus.ring.offset"),`;
}

.p-toggleswitch.p-invalid > .p-toggleswitch-slider {
    border-color: `).concat(e("toggleswitch.invalid.border.color"),`;
}

.p-toggleswitch.p-disabled {
    opacity: 1;
}

.p-toggleswitch.p-disabled .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.disabled.background"),`;
}

.p-toggleswitch.p-disabled .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.disabled.background"),`;
}
`)},Jt={root:{position:"relative"}},Wt={root:function(n){var e=n.instance,i=n.props;return["p-toggleswitch p-component",{"p-toggleswitch-checked":e.checked,"p-disabled":i.disabled,"p-invalid":e.$invalid}]},input:"p-toggleswitch-input",slider:"p-toggleswitch-slider",handle:"p-toggleswitch-handle"},Yt=X.extend({name:"toggleswitch",theme:qt,classes:Wt,inlineStyles:Jt}),Qt={name:"BaseToggleSwitch",extends:ht,props:{trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Yt,provide:function(){return{$pcToggleSwitch:this,$parentInstance:this}}},Ge={name:"ToggleSwitch",extends:Qt,inheritAttrs:!1,emits:["change","focus","blur"],methods:{getPTOptions:function(n){var e=n==="root"?this.ptmi:this.ptm;return e(n,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(n){if(!this.disabled&&!this.readonly){var e=this.checked?this.falseValue:this.trueValue;this.writeValue(e,n),this.$emit("change",n)}},onFocus:function(n){this.$emit("focus",n)},onBlur:function(n){var e,i;this.$emit("blur",n),(e=(i=this.formField).onBlur)===null||e===void 0||e.call(i,n)}},computed:{checked:function(){return this.d_value===this.trueValue}}},Xt=["data-p-checked","data-p-disabled"],Zt=["id","checked","tabindex","disabled","readonly","aria-checked","aria-labelledby","aria-label","aria-invalid"];function en(t,n,e,i,s,o){return d(),w("div",I({class:t.cx("root"),style:t.sx("root")},o.getPTOptions("root"),{"data-p-checked":o.checked,"data-p-disabled":t.disabled}),[b("input",I({id:t.inputId,type:"checkbox",role:"switch",class:[t.cx("input"),t.inputClass],style:t.inputStyle,checked:o.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,"aria-checked":o.checked,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,onFocus:n[0]||(n[0]=function(){return o.onFocus&&o.onFocus.apply(o,arguments)}),onBlur:n[1]||(n[1]=function(){return o.onBlur&&o.onBlur.apply(o,arguments)}),onChange:n[2]||(n[2]=function(){return o.onChange&&o.onChange.apply(o,arguments)})},o.getPTOptions("input")),null,16,Zt),b("div",I({class:t.cx("slider")},o.getPTOptions("slider")),[b("div",I({class:t.cx("handle")},o.getPTOptions("handle")),[N(t.$slots,"handle",{checked:o.checked})],16)],16)],16,Xt)}Ge.render=en;const J={hideLesson:tn,modifyLesson:nn,publishLesson:on,sendLessonForReview:an,cancelLessonReview:ln,startLessonReview:sn,acceptLesson:rn,rejectLesson:cn,editLesson:dn};async function tn(t){return await M.patch(`v2/lesson/${t}/hide`)}async function nn(t){return await M.patch(`v2/lesson/${t}/modify`)}async function on(t){return await M.patch(`v2/lesson/${t}/publish`)}async function an(t){return await M.patch(`v2/lesson/${t}/review/send`)}async function ln(t){return await M.patch(`v2/lesson/${t}/review/cancel`)}async function sn(t){return await M.patch(`v2/lesson/${t}/review/start`)}async function rn(t){return await M.patch(`v2/lesson/${t}/review/accept`)}async function cn(t){return await M.patch(`v2/lesson/${t}/review/reject`)}async function dn(t){return await M.patch(`v2/lesson/${t}/review/edit`)}const D=[];for(let t=0;t<256;++t)D.push((t+256).toString(16).slice(1));function un(t,n=0){return(D[t[n+0]]+D[t[n+1]]+D[t[n+2]]+D[t[n+3]]+"-"+D[t[n+4]]+D[t[n+5]]+"-"+D[t[n+6]]+D[t[n+7]]+"-"+D[t[n+8]]+D[t[n+9]]+"-"+D[t[n+10]]+D[t[n+11]]+D[t[n+12]]+D[t[n+13]]+D[t[n+14]]+D[t[n+15]]).toLowerCase()}let ge;const pn=new Uint8Array(16);function vn(){if(!ge){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ge=crypto.getRandomValues.bind(crypto)}return ge(pn)}const hn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ze={randomUUID:hn};function Ue(t,n,e){var s;if(ze.randomUUID&&!n&&!t)return ze.randomUUID();t=t||{};const i=t.random??((s=t.rng)==null?void 0:s.call(t))??vn();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,un(i)}const fn={class:"flex items-center"},gn={class:"flex items-center mr-2"},mn=L({__name:"HighlightEditor",props:Be({index:{},usedSlots:{}},{highlight:{},highlightModifiers:{}}),emits:Be(["remove","save"],["update:highlight"]),setup(t,{emit:n}){const e=t,i=we(t,"highlight"),s=$(""),o=$(null),a=$(null),l=$(!1),u=he(()=>o.value!=null&&a.value!=null),c=n,r=()=>{c("remove",e.index)};G(()=>{i.value&&(s.value=i.value.id,o.value=i.value.module,a.value=i.value.slot,l.value=i.value.autoPut)}),E([o,a,l],()=>{o.value!=null&&c("save",e.index,s.value,o.value,a.value,l.value)}),E(u,_=>{_||(l.value=!1)});const m=$(["A","B","C","D","E","F"]),y=$(["8","9"]),g=$(["LED","switch","push-button","light-sensor","touch-sensor","potentiometer","encoder","motion-detector","microphone","climate-sensor","gyro-accel","buzzer","color-sensor","joystick","distance-sensor","servo","led-tower"]),f=he(()=>{if(o.value){if(o.value==="servo"||o.value==="led-tower"){const x=y.value.filter(U=>!(e.usedSlots??[]).includes(U));return a.value&&!x.includes(a.value)&&x.unshift(a.value),[null,...x]}const h=m.value.filter(v=>!(e.usedSlots??[]).includes(v));return a.value&&!h.includes(a.value)&&h.unshift(a.value),[null,...h]}const P=[...m.value,...y.value].filter(T=>!(e.usedSlots??[]).includes(T));return a.value&&!P.includes(a.value)&&P.unshift(a.value),[null,...P]}),C=he(()=>a.value?a.value==="8"||a.value==="9"?["servo","led-tower"]:g.value.filter(_=>_!=="servo"&&_!=="led-tower"):g.value);return(_,P)=>{const T=He,h=ve,v=Me,x=Ke,U=F;return d(),w("div",fn,[b("div",gn,[p(T,{modelValue:l.value,"onUpdate:modelValue":P[0]||(P[0]=B=>l.value=B),binary:"","input-id":"autoput",disabled:!u.value},null,8,["modelValue","disabled"]),P[3]||(P[3]=b("label",{for:"autoput",class:"ml-1 text-sm"},"auto",-1))]),p(x,null,{default:S(()=>[p(h,{modelValue:o.value,"onUpdate:modelValue":P[1]||(P[1]=B=>o.value=B),options:C.value,placeholder:"Select module",class:"place-content-center",size:"small"},null,8,["modelValue","options"]),p(v,{class:"h-[35px]"},{default:S(()=>P[4]||(P[4]=[b("div",null,"=>",-1)])),_:1}),p(h,{modelValue:a.value,"onUpdate:modelValue":P[2]||(P[2]=B=>a.value=B),options:f.value,placeholder:"Select slot",size:"small"},{option:S(({option:B})=>[b("span",{class:W(B===null?"text-gray-400":"")},ee(B===null?"[null]":B),3)]),value:S(({value:B})=>[b("span",{class:W(B===null?"text-gray-400":"")},ee(B===null?"[null]":B),3)]),_:1},8,["modelValue","options"])]),_:1}),p(U,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:r,class:"ml-2"})])}}}),bn={class:"flex flex-col gap-2"},yn=L({__name:"HighlightPanel",props:{neededModules:{default:[]},neededModulesModifiers:{}},emits:["update:neededModules"],setup(t){const n=we(t,"neededModules");function e(){n.value=[...n.value,{autoPut:!1,module:null,slot:null,id:Ue()}]}function i(o){n.value.splice(o,1)}function s(o,a,l,u,c){n.value[o].id=a,n.value[o].module=l,n.value[o].slot=u,n.value[o].autoPut=c}return(o,a)=>{const l=F,u=ut;return d(),k(u,{header:"Highlight slots & modules"},{default:S(()=>[b("div",bn,[(d(!0),w(K,null,Q(n.value,(c,r)=>(d(),w("div",{key:c.id},[p(mn,{highlight:n.value[r],"onUpdate:highlight":m=>n.value[r]=m,index:r,usedSlots:n.value.filter((m,y)=>{var g;return y!==r&&((g=n.value[y])==null?void 0:g.slot)!=null}).map(m=>m.slot),onRemove:i,onSave:s},null,8,["highlight","onUpdate:highlight","index","usedSlots"])]))),128))]),p(l,{icon:"pi pi-plus",variant:"text","aria-label":"Add",class:"self-center mt-2",onClick:e})]),_:1})}}}),wn={class:"flex"},_n={class:"h-[500px] flex flex-col w-full relative"},$n={class:"absolute right-2 bottom-2"},me=!1,kn=L({__name:"PibodyEditor",props:{id:{},content:{},data:{}},emits:["save-content-data","show-tester"],setup(t,{emit:n}){const e=Y(),i=t,s=n,o=$(""),a=$(""),l=$([]);let u=!0;_e(()=>{o.value=i.content.starting,a.value=i.content.answer,l.value=i.data.neededModules??[]}),E([o,a,l],()=>{if(u){u=!1;return}s("save-content-data",{starting:o.value,answer:a.value,hashed_answer:""},{neededModules:l.value.filter(r=>r.module!=null),tests:i.data.tests,includedCommandsForTests:i.data.includedCommandsForTests})},{deep:!0});function c(){s("show-tester",{lesson_id:e.params.id,unit_id:i.id.split("-")[1]})}return(r,m)=>{var C,_;const y=Ne,g=je,f=F;return d(),w(K,null,[b("div",wn,[b("div",_n,[p(g,{style:{height:"100%",border:"0.1px solid #808080",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",overflow:"hidden"}},{default:S(()=>[p(y,{size:50,minSize:20},{default:S(()=>[p(pe,{code:o.value,"onUpdate:code":m[0]||(m[0]=P=>o.value=P),runbuttons:!1,connectbuttons:me,id:i.id+"_",class:"h-full"},null,8,["code","id"])]),_:1}),p(y,{size:50,minSize:20},{default:S(()=>[p(pe,{code:a.value,"onUpdate:code":m[1]||(m[1]=P=>a.value=P),connectbuttons:me,"onUpdate:connectbuttons":m[2]||(m[2]=P=>me=P),id:i.id,class:"h-full"},null,8,["code","id"])]),_:1})]),_:1}),b("div",$n,[p(f,{label:`Tests (${((_=(C=i.data)==null?void 0:C.tests)==null?void 0:_.length)??0})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:c},null,8,["label"])]),p(A(Re),{id:i.id,class:"flex-grow max-h-40"},null,8,["id"])])]),p(yn,{neededModules:l.value,"onUpdate:neededModules":m[3]||(m[3]=P=>l.value=P),class:"mb-2",style:{borderTopLeftRadius:"0px",borderTopRightRadius:"0px"}},null,8,["neededModules"])],64)}}}),xn={class:"flex"},An={class:"h-[500px] flex flex-col w-full relative"},Cn={class:"absolute right-2 bottom-2"},be=!1,Pn=L({__name:"CodeEditor",props:{id:{},code:{},data:{}},emits:["save-content-data","show-tester"],setup(t,{emit:n}){const e=Y(),i=t,s=n,o=$(""),a=$("");let l=!0;_e(()=>{o.value=i.code.starting,a.value=i.code.answer}),E([o,a],()=>{if(l){l=!1;return}s("save-content-data",{starting:o.value,answer:a.value,hashed_answer:""})});function u(){s("show-tester",{lesson_id:e.params.id,unit_id:i.id.split("-")[1]})}return(c,r)=>{var f,C;const m=Ne,y=je,g=F;return d(),w("div",xn,[b("div",An,[p(y,{style:{height:"100%",border:"0.1px solid #808080",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",overflow:"hidden"}},{default:S(()=>[p(m,{size:50,minSize:20},{default:S(()=>[p(pe,{code:o.value,"onUpdate:code":r[0]||(r[0]=_=>o.value=_),runbuttons:!1,connectbuttons:be,id:i.id+"_",class:"h-full"},null,8,["code","id"])]),_:1}),p(m,{size:50,minSize:20},{default:S(()=>[p(pe,{code:a.value,"onUpdate:code":r[1]||(r[1]=_=>a.value=_),connectbuttons:be,"onUpdate:connectbuttons":r[2]||(r[2]=_=>be=_),id:i.id,class:"h-full"},null,8,["code","id"])]),_:1})]),_:1}),b("div",Cn,[p(g,{label:`Tests (${((C=(f=i.data)==null?void 0:f.tests)==null?void 0:C.length)??0})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:u},null,8,["label"])]),p(A(Re),{id:i.id,class:"flex-grow max-h-40"},null,8,["id"])])])}}}),Tn=["article","options","open","video","code","pibody","checklist","tinkercad","submit-image"],O=Ze("lesson-edit-store",()=>{const t=et(),n=Ae(),{lang:e}=H(n),i=$(null),s=$(!1),o=$(!1),a=$(!1),l=$(!1),u=$(!1),c=$(!1);function r(h){a.value=h}async function m(h){try{s.value=!0;const{data:v}=await De.getLessonById(h,void 0,e.value);i.value=lt(v)}catch(v){t.add({severity:"error",summary:v.response.data.error,life:2e3})}finally{s.value=!1}}async function y(h,v){try{o.value=!0;const{data:x}=await Z.getUnitByIdandLessonId(h,v,e.value);return x}catch(x){t.add({severity:"error",summary:x.response.data.error,life:2e3})}finally{o.value=!1}}async function g(h){try{l.value=!0;const{data:v}=await Z.createUnitByLessonId(i.value.id,h);t.add({severity:"success",summary:v.message,life:2e3})}catch(v){t.add({severity:"error",summary:v.response.data.error,life:2e3})}finally{l.value=!1}}async function f(h,v,x){try{u.value=!0;const{data:U}=await Z.updateUnitByIdandLessonId(h,v,x,e.value);return U.unit_id}catch(U){t.add({severity:"error",summary:U.response.data.error,life:2e3})}finally{u.value=!1}}async function C(h,v){try{c.value=!0;const{data:x}=await Z.deleteUnitByIdandLessonId(h,v);t.add({severity:"success",summary:x.message,life:2e3})}catch(x){t.add({severity:"error",summary:x.response.data.error,life:2e3})}finally{c.value=!1}}async function _(h,v){try{s.value=!0;const{data:x}=await De.translateLesson(h,e.value,v,"chatgpt");t.add({severity:"success",summary:x.message,life:2e3})}catch(x){t.add({severity:"error",summary:x.response.data.error,life:2e3})}finally{s.value=!1}}async function P(h,v,x){try{u.value=!0;const{data:U}=await Z.translateUnit(h,v,x,"chatgpt");t.add({severity:"success",summary:U.message,life:2e3})}catch(U){t.add({severity:"error",summary:U.response.data.error,life:2e3})}finally{u.value=!1}}async function T(h,v,x){try{u.value=!0;const{data:U}=await Z.copyUnitContent(i.value.id,h,v,x);t.add({severity:"success",summary:U.message,life:2e3})}catch(U){t.add({severity:"error",summary:U.response.data.error,life:2e3})}finally{u.value=!1}}return{selectedLesson:i,isLessonLoading:s,isLessonSaving:a,isUnitLoading:o,isUnitCreating:l,isUnitUpdating:u,isUnitDeleting:c,setLessonSaving:r,loadLessonById:m,loadUnitByIdandLessonId:y,createUnit:g,updateUnitByIdandLessonId:f,deleteUnitByIdandLessonId:C,translateLessonToLang:_,translateUnitContent:P,copyUnitContent:T}}),Sn={class:"flex items-start"},Un=L({__name:"MdEditor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const n=we(t,"modelValue"),e=tt({title:{title:"Title",icon:"v-md-icon-tip",action(o){o.insert(a=>{const l="# <center>",u="</center>",r=a||"Title";return{text:`${l}${r}${u}`,selected:r}})}},icons:{title:"Icons",icon:"v-md-icon-tip",menus:[{name:"Attention",text:"Attention",action(o){o.insert(()=>{const a='<span style="font-size: 20px">',l="</span>",u="⚠️";return{text:`${a}${u}${l}`,selected:u}})}},{name:"PiBody",text:"PiBody",action(o){o.insert(()=>{const a="<b>",l="</b>",u='<span style="color: #FF3F85"> Pi</span>Body';return{text:`${a}${u}${l}`,selected:u}})}},{name:"Run",text:"Run",action(o){o.insert(()=>({text:'<img src="https://static.artisan.education/lessons/image__c9041f3cc90b4dc188f9c2277f57f5a0..png" alt="Run" style="height: 1em;vertical-align: -0.2em;display:inline;">'}))}}]},style:{title:"Style",icon:"v-md-icon-tip",action(o){o.insert(a=>{const l='<span style="">',u="</span>",r=a||"placeholder";return{text:`${l}${r}${u}`,selected:r}})}},underline:{title:"Underline",icon:"v-md-icon-under-line",action(o){o.insert(a=>{const l='<span style="text-decoration: underline">',u="</span>",r=a||"placeholder";return{text:`${l}${r}${u}`,selected:r}})}},tip:{title:"Tip",icon:"v-md-icon-tip",action(o){o.insert(a=>{const l='<div style="background-color:#F3F5F7; padding: 20px; border-left: solid 8px #42B983">',u="</div>",r=a||"placeholder";return{text:`${l}${r}${u}`,selected:r}})}},note:{title:"Note",icon:"v-md-icon-tip",action(o){o.insert(a=>{const l='<div style="background-color:#F3F5F7; padding: 15px; border-left: solid 8px #FFCD6B; margin-bottom: 15px">',u="</div>",r=a||"placeholder";return{text:`${l}${r}${u}`,selected:r}})}},uploadfile:{title:"Upload File",icon:"v-md-icon-tip",action(o){const a=document.createElement("input");a.type="file",a.onchange=l=>{var c;const u=(c=l.target.files)==null?void 0:c[0];u&&s(u,o)},a.click()}}});async function i(o,a,l){const u=l[0],c=new FormData;c.append("file",u);try{const{data:r}=await Fe.uploadFile(c,"image"),m=r.source_url;a({url:m,desc:"desc",width:"auto",height:"auto"})}catch(r){console.log(r)}}async function s(o,a){const l=new FormData;l.append("file",o);try{const{data:u}=await Fe.uploadFile(l,"file"),c=u.source_url;a.insert(r=>({text:`[${r}](${c})`,selected:r}))}catch(u){console.error(u)}}return(o,a)=>{const l=ue("v-md-editor");return d(),w("div",Sn,[p(l,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=u=>n.value=u),mode:"edit",onChange:a[1]||(a[1]=u=>n.value=u),"left-toolbar":"undo redo clear | tip emoji todo-list | h bold italic strikethrough quote ul ol table hr link code image | title icons style underline tip note uploadfile","right-toolbar":"",toolbar:e,"disabled-menus":[],onUploadImage:i},null,8,["modelValue","toolbar"])])}}}),Ie=pt(Un,[["__scopeId","data-v-98b09236"]]),In=L({__name:"ArticleEditor",props:{article:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=$("");let o=!0;return G(()=>{var a;s.value=((a=e.article)==null?void 0:a.text)??""}),E(s,()=>{if(o){o=!1;return}i("save-content-data",{text:s.value})},{flush:"post"}),(a,l)=>(d(),k(Ie,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=u=>s.value=u)},null,8,["modelValue"]))}}),Ln={class:"flex flex-col gap-2"},Vn={class:"flex gap-1 text-gray-500"},Bn={class:"flex flex-col gap-1"},Dn=L({__name:"OptionsEditor",props:{optionsData:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=$(!1),o=$(!1),a=$(!1),l=$([]),u=$([]),c=$();let r=!0;G(()=>{var g,f,C,_,P,T;s.value=((g=e.optionsData)==null?void 0:g.shuffle)??!1,o.value=((f=e.optionsData)==null?void 0:f.feedback)??!1,a.value=((C=e.optionsData)==null?void 0:C.single)??!1,l.value=((_=e.optionsData)==null?void 0:_.options)??[],u.value=((P=e.optionsData)==null?void 0:P.answer)??[],c.value=e.optionsData&&e.optionsData.answer&&e.optionsData.answer.length>0?(T=e.optionsData)==null?void 0:T.answer[0]:void 0}),E([s,o,a,l,u,c],()=>{if(r){r=!1;return}i("save-content-data",{shuffle:s.value,feedback:o.value,single:a.value,options:l.value,answer:a.value?c.value?[c.value]:[]:u.value,hashed_answer:[]})},{deep:!0});function m(){l.value.push({id:Ue(),text:""})}function y(g){l.value=l.value.filter(f=>f.id!==g),u.value=u.value.filter(f=>f!==g),c.value==g&&(c.value=void 0)}return(g,f)=>{const C=Ge,_=vt,P=He,T=F;return d(),w("div",Ln,[b("div",Vn,[f[5]||(f[5]=b("div",null,"shuffle:",-1)),p(C,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=h=>s.value=h),class:"mr-2"},null,8,["modelValue"]),f[6]||(f[6]=b("div",null,"feedback:",-1)),p(C,{modelValue:o.value,"onUpdate:modelValue":f[1]||(f[1]=h=>o.value=h),class:"mr-2"},null,8,["modelValue"]),f[7]||(f[7]=b("div",null,"single:",-1)),p(C,{modelValue:a.value,"onUpdate:modelValue":f[2]||(f[2]=h=>a.value=h)},null,8,["modelValue"])]),b("div",Bn,[(d(!0),w(K,null,Q(l.value,h=>(d(),w("div",{key:h.id,class:"flex gap-2 items-center"},[a.value?(d(),k(_,{key:0,modelValue:c.value,"onUpdate:modelValue":f[3]||(f[3]=v=>c.value=v),value:h.id},null,8,["modelValue","value"])):(d(),k(P,{key:1,modelValue:u.value,"onUpdate:modelValue":f[4]||(f[4]=v=>u.value=v),value:h.id},null,8,["modelValue","value"])),p(Ie,{modelValue:h.text,"onUpdate:modelValue":v=>h.text=v,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),p(T,{icon:"pi pi-trash",variant:"text",severity:"danger",size:"small",onClick:v=>y(h.id)},null,8,["onClick"])]))),128))]),p(T,{icon:"pi pi-plus",label:"Add option",variant:"text",size:"small",onClick:m,class:"self-center"})])}}}),Fn=L({__name:"OpenEditor",props:{open:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=$("");let o=!0;return G(()=>{var a;s.value=((a=e.open)==null?void 0:a.answer)??""}),E(s,()=>{if(o){o=!1;return}i("save-content-data",{answer:s.value,hashed_answer:""})}),(a,l)=>{const u=Ce;return d(),k(u,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),zn=L({__name:"VideoEditor",props:{video:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=$("");let o=!0;return G(()=>{var a;s.value=((a=e.video)==null?void 0:a.url)??""}),E(s,()=>{if(o){o=!1;return}i("save-content-data",{url:s.value})}),(a,l)=>{const u=Ce;return d(),k(u,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),En={class:"flex flex-col gap-2"},Rn={class:"flex flex-col gap-1"},Nn=L({__name:"ChecklistEditor",props:{id:{},checklist:{},data:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=$e(),i=Y(),s=t,o=n,a=$([]),l=$([]);let u=!0;G(()=>{a.value=s.checklist.options??[],l.value=s.data.checks??[];for(const y of l.value)a.value.some(g=>g.id===y.id)||a.value.push({id:y.id,text:""});a.value=a.value.filter(y=>l.value.some(g=>g.id===y.id))}),E([l,a],()=>{if(u){u=!1;return}o("save-content-data",{options:a.value},{checks:l.value})},{deep:!0});function c(){const y=Ue();l.value.push({id:y,solution:"",tests:[]}),a.value.push({id:y,text:""})}function r(y){a.value=a.value.filter(g=>g.id!==y),l.value=l.value.filter(g=>g.id!==y)}function m(y){const g=e.resolve({name:"tester2",params:{lesson_id:i.params.id,unit_id:s.id},query:{check_id:y}}).href;window.open(g,"_blank")}return(y,g)=>{const f=F;return d(),w("div",En,[b("div",Rn,[(d(!0),w(K,null,Q(l.value,C=>(d(),w("div",{key:C.id,class:"flex gap-2 items-center"},[p(Ie,{modelValue:(a.value.find(_=>_.id===C.id)||{}).text,"onUpdate:modelValue":_=>(a.value.find(P=>P.id===C.id)||{}).text=_,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),p(f,{label:`Tests (${C.tests.length})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:()=>m(C.id)},null,8,["label","onClick"]),p(f,{icon:"pi pi-trash",variant:"text",severity:"danger",size:"small",onClick:_=>r(C.id)},null,8,["onClick"])]))),128))]),p(f,{icon:"pi pi-plus",label:"Add todo",variant:"text",size:"small",onClick:c,class:"self-center"})])}}}),jn=L({__name:"TinkercadEditor",props:{tinkercad:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=$("");let o=!0;return G(()=>{var a;s.value=((a=e.tinkercad)==null?void 0:a.url)??""}),E(s,()=>{if(o){o=!1;return}i("save-content-data",{url:s.value})}),(a,l)=>{const u=Ce;return d(),k(u,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),Hn={class:"flex flex-wrap justify-between items-center flex-1 gap-4"},On={class:"flex gap-2"},Kn=L({__name:"SubmitImageEditor",setup(t){const n=e=>{e()};return(e,i)=>{const s=F,o=ft;return d(),k(o,{name:"submit-image",mode:"advanced",multiple:!1,accept:"image/*",maxFileSize:1e6,disabled:!0},{header:S(({chooseCallback:a,uploadCallback:l,clearCallback:u,files:c})=>[b("div",Hn,[b("div",On,[p(s,{onClick:r=>a(),icon:"pi pi-images",rounded:"",variant:"outlined",severity:"success",disabled:!0},null,8,["onClick"]),p(s,{onClick:r=>n(l),icon:"pi pi-cloud-upload",rounded:"",variant:"outlined",severity:"success",disabled:!c||c.length===0},null,8,["onClick","disabled"]),p(s,{onClick:r=>u(),icon:"pi pi-times",rounded:"",variant:"outlined",severity:"danger",disabled:!c||c.length===0},null,8,["onClick","disabled"])])])]),empty:S(()=>i[0]||(i[0]=[b("div",{class:"flex items-center justify-center flex-col"},[b("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"}),b("p",{class:"mt-6 mb-0"},"Students will upload file here to submit.")],-1)])),_:1})}}}),Mn={class:"flex flex-col gap-4"},Gn={class:"flex justify-end gap-2 mt-4"},qn=L({__name:"UnitTranslateSelector",props:{unit:{}},setup(t){const n=O(),{translateUnitContent:e}=n,i=t,s=$(!1),o=$(null),a=$(null),l=$(!1);async function u(){if(!(!a.value||!i.unit.id)){l.value=!0;try{await e(i.unit.id,o.value,a.value)}catch(c){console.error("❌ Translation error:",c)}finally{l.value=!1,s.value=!1}}}return(c,r)=>{const m=F,y=ve,g=ke;return d(),w("div",null,[p(m,{icon:"pi pi-language",variant:"text",severity:"contrast",onClick:r[0]||(r[0]=f=>s.value=!0)}),p(g,{visible:s.value,"onUpdate:visible":r[4]||(r[4]=f=>s.value=f),modal:"",header:`Translate unit content (${i.unit.id}-${i.unit.unitType})`,style:{width:"400px"}},{default:S(()=>[b("div",Mn,[r[5]||(r[5]=b("label",{for:"sourceLang",class:"font-semibold"}," From language: ",-1)),p(y,{id:"sourceLang",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=f=>o.value=f),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),r[6]||(r[6]=b("label",{for:"targetLang",class:"font-semibold"}," To language: ",-1)),p(y,{id:"targetLang",modelValue:a.value,"onUpdate:modelValue":r[2]||(r[2]=f=>a.value=f),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),b("div",Gn,[p(m,{label:"Close",text:"",disabled:l.value,onClick:r[3]||(r[3]=f=>s.value=!1)},null,8,["disabled"]),p(m,{label:"Translate",disabled:!o.value||!a.value||l.value,loading:l.value,onClick:u},null,8,["disabled","loading"])])])]),_:1},8,["visible","header"])])}}}),Jn={class:"flex flex-col gap-4"},Wn={class:"flex justify-end gap-2 mt-4"},Yn=L({__name:"UnitCopySelector",props:{unit:{}},setup(t){const n=O(),{copyUnitContent:e}=n,i=t,s=$(!1),o=$(null),a=$(null),l=$(!1);async function u(){if(!(!a.value||!i.unit.id)){l.value=!0;try{await e(i.unit.id,o.value,a.value)}catch(c){console.error("❌ Copy error:",c)}finally{l.value=!1,s.value=!1}}}return(c,r)=>{const m=F,y=ve,g=ke;return d(),w("div",null,[p(m,{icon:"pi pi-copy",variant:"text",severity:"contrast",onClick:r[0]||(r[0]=f=>s.value=!0)}),p(g,{visible:s.value,"onUpdate:visible":r[4]||(r[4]=f=>s.value=f),modal:"",header:`Copy unit content (${i.unit.id}-${i.unit.unitType})`,style:{width:"400px"}},{default:S(()=>[b("div",Jn,[r[5]||(r[5]=b("label",{for:"sourceLang",class:"font-semibold"}," From language: ",-1)),p(y,{id:"sourceLang",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=f=>o.value=f),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),r[6]||(r[6]=b("label",{for:"targetLang",class:"font-semibold"}," To language: ",-1)),p(y,{id:"targetLang",modelValue:a.value,"onUpdate:modelValue":r[2]||(r[2]=f=>a.value=f),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),b("div",Wn,[p(m,{label:"Close",text:"",disabled:l.value,onClick:r[3]||(r[3]=f=>s.value=!1)},null,8,["disabled"]),p(m,{label:"Copy",disabled:!o.value||!a.value||l.value,loading:l.value,onClick:u},null,8,["disabled","loading"])])])]),_:1},8,["visible","header"])])}}}),Qn={class:"bg-white rounded-lg border border-gray-200"},Xn={key:1,class:"flex flex-col h-full w-full"},Zn={class:"flex items-center gap-2 px-4 pt-2"},eo={class:"text-sm"},to={class:"text-sm text-gray-500"},no={key:1,class:"flex-grow px-4 py-2"},oo={class:"flex justify-end"},ao=L({__name:"UnitCard",props:{unit:{},loading:{type:Boolean}},emits:["delete","update"],setup(t,{emit:n}){const e=Ae(),{lang:i}=H(e),s=t,o=n,a=Y(),l=$e(),u=O(),{updateUnitByIdandLessonId:c,setLessonSaving:r,loadUnitByIdandLessonId:m}=u,y=$(!1),g=$(null),f=$(null);_e(async()=>{y.value=!0;const h=await m(s.unit.id,Number(a.params.id));h&&(g.value=h.content,f.value=h.data),y.value=!1});function C(h,v){r(!0),P(h,v)}function _(h){const v=l.resolve({name:"tester2",params:{lesson_id:h.lesson_id,unit_id:h.unit_id}}).href;window.open(v,"_blank")}const P=gt((h,v)=>{T(h,v)},1e3,{maxWait:5e3});async function T(h,v){const x=await c(s.unit.id,Number(a.params.id),{content:h,data:v});x&&o("update",s.unit,x),r(!1)}return(h,v)=>{const x=dt,U=F;return d(),w("div",Qn,[h.loading?(d(),k(x,{key:0,class:"flex justify-center items-center w-10 h-full"})):(d(),w("div",Xn,[b("div",Zn,[b("div",eo,ee(h.unit.id),1),b("div",to,ee(`${h.unit.unitType}`),1)]),y.value?(d(),k(x,{key:0,class:"flex justify-center items-center w-10 h-full"})):(d(),w("div",no,[h.unit.unitType=="article"?(d(),k(In,{key:0,article:g.value,onSaveContentData:C},null,8,["article"])):h.unit.unitType=="options"?(d(),k(Dn,{key:1,"options-data":g.value,onSaveContentData:C},null,8,["options-data"])):h.unit.unitType=="open"?(d(),k(Fn,{key:2,open:g.value,onSaveContentData:C},null,8,["open"])):h.unit.unitType=="video"?(d(),k(zn,{key:3,video:g.value,onSaveContentData:C},null,8,["video"])):h.unit.unitType=="tinkercad"?(d(),k(jn,{key:4,tinkercad:g.value,onSaveContentData:C},null,8,["tinkercad"])):h.unit.unitType=="checklist"?(d(),k(Nn,{key:5,id:`${s.unit.id}`,checklist:g.value,data:f.value,onSaveContentData:C},null,8,["id","checklist","data"])):s.unit.unitType=="code"?(d(),k(A(Pn),{key:6,id:`code-${s.unit.id}-${A(i)}`,code:g.value,data:f.value,onSaveContentData:C,onShowTester:_},null,8,["id","code","data"])):s.unit.unitType=="pibody"?(d(),k(A(kn),{key:7,id:`pibody-${s.unit.id}-${A(i)}`,content:g.value,data:f.value,onSaveContentData:C,onShowTester:_},null,8,["id","content","data"])):h.unit.unitType=="submit-image"?(d(),k(Kn,{key:8})):V("",!0)])),b("div",oo,[p(Yn,{unit:s.unit},null,8,["unit"]),p(qn,{unit:s.unit},null,8,["unit"]),p(U,{icon:"pi pi-trash",size:"small",severity:"danger",variant:"text",onClick:v[0]||(v[0]=xe(B=>o("delete",s.unit),["stop"]))})])]))])}}}),io={class:"group w-full relative"},lo={class:"flex"},ye=L({__name:"AddUnitButton",props:{unitId:{},showAddGroup:{type:Boolean},hided:{type:Boolean}},emits:["add-group-divider"],setup(t,{emit:n}){const e=t,i=n,s=Y(),o=O(),{loadLessonById:a,createUnit:l}=o,u=$(),c=$(Tn.map(m=>({label:m,command:async()=>{await l({unit_type:m,prev_unit_id:e.unitId??void 0}),await a(Number(s.params.id))}}))),r=m=>{u.value.toggle(m)};return(m,y)=>{const g=bt,f=F,C=mt;return d(),w(K,null,[b("div",io,[y[1]||(y[1]=b("div",{class:"h-3"},null,-1)),b("div",{class:W(["absolute left-1/2 -translate-x-1/2 -top-5 group-hover:block mt-[9px] w-full",m.hided?"hidden":""])},[b("div",lo,[p(g,{class:"w-7",type:"dashed"}),p(g,{class:"flex-grow",type:"dashed"}),p(f,{icon:"pi pi-plus",class:"flex self-end shadow-xl h-7",size:"small",onClick:r}),p(g,{class:"flex-grow",type:"dashed"}),m.showAddGroup?(d(),k(f,{key:0,icon:"pi pi-arrow-up-right-and-arrow-down-left-from-center",class:"flex self-end h-7",size:"small",variant:"text",onClick:y[0]||(y[0]=_=>i("add-group-divider"))})):(d(),k(g,{key:1,class:"w-7",type:"dashed"}))])],2)]),p(C,{ref_key:"menu",ref:u,model:c.value,popup:!0},null,8,["model"])],64)}}}),so=L({__name:"RemoveGroupButton",emits:["remove-group-divider"],setup(t,{emit:n}){const e=n;return(i,s)=>{const o=F;return d(),k(o,{icon:"pi pi-arrow-down-left-and-arrow-up-right-to-center",severity:"danger",class:"flex self-end h-7 w-7",size:"small",variant:"text",onClick:s[0]||(s[0]=xe(a=>e("remove-group-divider"),["stop"]))})}}}),ro={class:"flex flex-col gap-2"},co={class:"w-full flex justify-between gap-2 mr-4"},uo={class:"flex flex-row"},po={class:"flex flex-col p-2 rounded-lg bg-slate-50"},vo=L({__name:"UnitsView",props:{pages:{}},setup(t){const n=t,e=Y(),i=nt(),s=O(),{isUnitDeleting:o}=H(s),{loadLessonById:a,createUnit:l,deleteUnitByIdandLessonId:u}=s,c=$(null);async function r(v){await l({unit_type:"group-divider",prev_unit_id:v.id}),await a(Number(e.params.id))}async function m(){await l({unit_type:"page-divider"}),await a(Number(e.params.id))}async function y(v){await l({unit_type:"page-divider",prev_unit_id:v}),await u(v,Number(e.params.id)),await a(Number(e.params.id))}async function g(v){await u(v,Number(e.params.id)),await a(Number(e.params.id))}function f(v){c.value=v,i.require({...ct,message:"Are you sure you want to delete this lesson?",accept:async()=>{await u(v.id,Number(e.params.id)),await a(Number(e.params.id))}})}function C(v,x){x>v.id&&(v.id=x)}const _=Number(e.params.id),P=`openedPanels-${_}`,T=$({});G(async()=>{const v=localStorage.getItem(P);v&&(T.value=JSON.parse(v)),await ot(),setTimeout(()=>{const x=localStorage.getItem(`lastOpenedGroup-${_}`);if(x){const U=document.getElementById(`group-${x}`);if(U){U.scrollIntoView({behavior:"smooth"});return}}},1e3)}),E(T,v=>{localStorage.setItem(P,JSON.stringify(v))},{deep:!0});function h(v,x){T.value[x]=v,T.value[x].length>0&&localStorage.setItem(`lastOpenedGroup-${_}`,v[v.length-1])}return(v,x)=>{const U=F,B=Te,le=Pe,se=Se,re=Oe;return d(),w("div",ro,[(d(!0),w(K,null,Q(n.pages,q=>(d(),k(re,{value:T.value[q.id]||[],"onUpdate:value":z=>h(z,q.id),multiple:"",key:q.id,class:"flex flex-col gap-2 bg-white p-4 rounded-lg shadow-lg"},{default:S(()=>[(d(!0),w(K,null,Q(q.groups,(z,ne)=>(d(),k(se,{key:z.id,value:z.id,id:`group-${z.id}`},{default:S(()=>[p(B,null,{default:S(()=>[b("div",co,[b("div",null,"Step: "+ee(ne),1),b("div",uo,[ne!=0?(d(),k(U,{key:0,icon:"pi pi-file-plus",class:"flex self-end h-7 w-7",size:"small",variant:"text",onClick:xe(R=>y(z.id),["stop"])},null,8,["onClick"])):V("",!0),z.id!=-1?(d(),k(so,{key:1,onRemoveGroupDivider:R=>g(z.id)},null,8,["onRemoveGroupDivider"])):V("",!0)])])]),_:2},1024),p(le,{class:"flex flex-col"},{default:S(()=>[b("div",po,[(d(!0),w(K,null,Q(z.units,(R,ce)=>{var oe;return d(),w("div",{key:R.id},[ce==0?(d(),k(ye,{key:0,hided:!0,"unit-id":z.id,"show-add-group":!1},null,8,["unit-id"])):V("",!0),p(ao,{unit:R,loading:((oe=c.value)==null?void 0:oe.id)===R.id&&A(o),onDelete:de=>f(R),onUpdate:C},null,8,["unit","loading","onDelete"]),p(ye,{hided:!0,"unit-id":R.id,"show-add-group":!0,onAddGroupDivider:de=>r(R)},null,8,["unit-id","onAddGroupDivider"])])}),128)),z.units.length==0?(d(),k(ye,{key:0,hided:!1,"unit-id":z.id,"show-add-group":!1},null,8,["unit-id"])):V("",!0)])]),_:2},1024)]),_:2},1032,["value","id"]))),128))]),_:2},1032,["value","onUpdate:value"]))),128)),p(U,{id:"newpage",icon:"pi pi-plus",label:"New page",variant:"text",size:"small",class:"flex self-center",onClick:x[0]||(x[0]=q=>m())})])}}}),ho={class:"w-[24px] h-[24px]"},fo={key:0,class:"flex items-center"},go={key:0,class:"material-icons text-gray-500"},mo={key:1,class:"material-icons text-gray-500"},bo={key:1},yo={class:"material-icons text-gray-500"},wo=L({__name:"AutoSaveCloud",setup(t){const n=O(),{selectedLesson:e,isLessonSaving:i}=H(n);return(s,o)=>{var l;const a=yt;return d(),w("div",ho,[(l=A(e))!=null&&l.editable?(d(),w("div",fo,[A(i)?ae((d(),w("span",mo,o[1]||(o[1]=[fe("cloud_sync")]))),[[a,"Saving...",void 0,{bottom:!0}]]):ae((d(),w("span",go,o[0]||(o[0]=[fe("cloud_done")]))),[[a,"Saved",void 0,{bottom:!0}]])])):(d(),w("div",bo,[ae((d(),w("span",yo,o[2]||(o[2]=[fe("cloud_off")]))),[[a,"Save not allowed",void 0,{bottom:!0}]])]))])}}}),_o={key:0},$o={key:0},ko={key:1},xo={key:0},Ao={key:1},Co={key:2},Po={key:0,class:"flex gap-1"},To={key:3},So={key:0},Uo={key:4},Io={key:0,class:"flex gap-1"},Lo={key:5},Vo={key:0,class:"flex gap-1"},Bo={key:6},Do={key:0,class:"flex gap-1"},Fo=L({__name:"StageButtons",setup(t){const n=Y(),e=at(),{user:i}=H(e),s=O(),{selectedLesson:o}=H(s),a=$(!1),l=$(!1);async function u(){a.value=!0;try{await J.sendLessonForReview(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function c(){a.value=!0;try{await J.cancelLessonReview(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function r(){a.value=!0;try{await J.startLessonReview(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function m(){a.value=!0;try{await J.acceptLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function y(){l.value=!0;try{await J.rejectLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{l.value=!1}}async function g(){a.value=!0;try{await J.editLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function f(){a.value=!0;try{await J.publishLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function C(){l.value=!0;try{await J.hideLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{l.value=!1}}return(_,P)=>{var h,v,x,U,B,le,se,re,q,z,ne,R,ce,oe,de;const T=F;return((h=A(o))==null?void 0:h.stage)=="prepare_for_submission"?(d(),w("div",_o,[((v=A(i))==null?void 0:v.user_type)=="contributor"?(d(),w("div",$o,[p(T,{label:"Send for review",severity:"info",size:"small",onClick:u,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((x=A(o))==null?void 0:x.stage)=="waiting_for_review"?(d(),w("div",ko,[((U=A(i))==null?void 0:U.user_type)=="contributor"?(d(),w("div",xo,[p(T,{label:"Cancel submission",severity:"danger",size:"small",onClick:c,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):((B=A(i))==null?void 0:B.user_type)=="editor"?(d(),w("div",Ao,[p(T,{label:"Start review",severity:"info",size:"small",onClick:r,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((le=A(o))==null?void 0:le.stage)=="in_review"?(d(),w("div",Co,[((se=A(i))==null?void 0:se.user_type)=="editor"?(d(),w("div",Po,[p(T,{label:"Reject",severity:"danger",size:"small",onClick:y,disabled:a.value||l.value,loading:l.value},null,8,["disabled","loading"]),p(T,{label:"Accept",size:"small",onClick:m,disabled:a.value||l.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((re=A(o))==null?void 0:re.stage)=="rejected"?(d(),w("div",To,[((q=A(i))==null?void 0:q.user_type)=="contributor"?(d(),w("div",So,[p(T,{label:"Edit submission",severity:"info",size:"small",onClick:g,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((z=A(o))==null?void 0:z.stage)=="ready_for_publish"?(d(),w("div",Uo,[((ne=A(i))==null?void 0:ne.user_type)=="editor"?(d(),w("div",Io,[A(o).createdBy!=Number(A(i).user_id)?(d(),k(T,{key:0,label:"Reject",severity:"danger",size:"small",onClick:y,disabled:a.value||l.value,loading:l.value},null,8,["disabled","loading"])):V("",!0),p(T,{label:"Publish",size:"small",onClick:f,disabled:a.value||l.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((R=A(o))==null?void 0:R.stage)=="published"?(d(),w("div",Lo,[((ce=A(i))==null?void 0:ce.user_type)=="editor"?(d(),w("div",Vo,[p(T,{label:"Hide",severity:"danger",size:"small",onClick:C,disabled:a.value||l.value,loading:l.value},null,8,["disabled","loading"])])):V("",!0)])):((oe=A(o))==null?void 0:oe.stage)=="in_modify"?(d(),w("div",Bo,[((de=A(i))==null?void 0:de.user_type)=="editor"?(d(),w("div",Do,[p(T,{label:"Hide",severity:"danger",size:"small",onClick:C,disabled:a.value||l.value,loading:l.value},null,8,["disabled","loading"]),p(T,{label:"Publish",size:"small",onClick:f,disabled:a.value||l.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):V("",!0)}}}),zo={key:0},Eo=L({__name:"StageStatus",setup(t){const n=O(),{selectedLesson:e}=H(n);return(i,s)=>{const o=wt;return A(e)?(d(),w("div",zo,[["prepare_for_submission","waiting_for_review","in_review","in_modify"].includes(A(e).stage)?(d(),k(o,{key:0,label:A(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-clock",pt:{icon:{class:"text-yellow-500"}},class:"h-8 bg-yellow-50 w-fit"},null,8,["label"])):["ready_for_publish","published"].includes(A(e).stage)?(d(),k(o,{key:1,label:A(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-check-circle",pt:{icon:{class:"text-green-500"}},class:"h-8 bg-green-50 w-fit"},null,8,["label"])):["rejected"].includes(A(e).stage)?(d(),k(o,{key:2,label:A(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-times-circle",pt:{icon:{class:"text-red-500"}},class:"h-8 bg-red-50 w-fit"},null,8,["label"])):V("",!0)])):V("",!0)}}}),Ro={class:"flex flex-col gap-4"},No={class:"flex justify-end gap-2 mt-4"},jo=L({__name:"LessonTranslateSelector",setup(t){const n=O(),{translateLessonToLang:e}=n,{selectedLesson:i}=H(n),s=$(!1),o=$(null),a=$(!1);async function l(){var u;if(!(!o.value||!((u=i.value)!=null&&u.id))){a.value=!0;try{console.log("▶️ Translating lesson",i.value.id,"→",o.value),await e(i.value.id,o.value),console.log("✅ Translation complete")}catch(c){console.error("❌ Translation error:",c)}finally{a.value=!1,s.value=!1}}}return(u,c)=>{const r=F,m=ve,y=ke;return d(),w("div",null,[p(r,{icon:"pi pi-language",variant:"text",severity:"contrast",onClick:c[0]||(c[0]=g=>s.value=!0)}),p(y,{visible:s.value,"onUpdate:visible":c[3]||(c[3]=g=>s.value=g),modal:"",header:"Translate lesson",style:{width:"400px"}},{default:S(()=>[b("div",Ro,[c[4]||(c[4]=b("label",{for:"targetLang",class:"font-semibold"}," Choose language to translate to: ",-1)),p(m,{id:"targetLang",modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=g=>o.value=g),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),b("div",No,[p(r,{label:"Cancel",text:"",onClick:c[2]||(c[2]=g=>s.value=!1)}),p(r,{label:"Translate",disabled:!o.value,loading:a.value,onClick:l},null,8,["disabled","loading"])])])]),_:1},8,["visible"])])}}}),Ho={class:"flex flex-col items-center"},Oo={class:"flex justify-between items-center w-full min-h-16 border-b border-gray-200 px-8 shadow-md gap-8"},Ko={class:"flex items-center gap-4"},Mo={class:"flex items-center gap-4"},Go={class:"w-full h-full max-w-screen-lg px-4 md:px-28 py-8"},qo={class:"fixed top-32 right-0 pl-2 pr-4 py-2 bg-white rounded-tl-lg rounded-bl-lg shadow-md z-[1000] border border-gray-200 flex flex-col items-center gap-4"},Ua=L({__name:"LessonEditPage",setup(t){const n=Y(),e=$e(),i=Ae(),{lang:s}=H(i),o=O(),{selectedLesson:a}=H(o),{loadLessonById:l}=o;G(()=>l(Number(n.params.id))),E(s,async(r,m)=>{r!==m&&a.value&&await l(a.value.id)});const u=()=>{let r="#";n.path.endsWith("/edit")&&a.value&&(a.value.lessonType==="project"?r=n.path.replace("/lesson/","/project/").replace(/\/edit$/,""):r=n.path.replace(/\/edit$/,"")),window.open(r,"_blank")};function c(){window.history.length>2?e.go(-1):e.push("/v2/routes")}return(r,m)=>{var g;const y=F;return d(),w("div",Ho,[b("div",Oo,[b("div",Ko,[p(y,{icon:"pi pi-times",variant:"text",severity:"contrast",onClick:c}),p(Eo)]),b("div",Mo,[p(Fo)])]),b("div",Go,[(d(),k(vo,{key:A(s),pages:(g=A(a))==null?void 0:g.pages},null,8,["pages"]))]),b("div",qo,[p(wo),p(A(it)),p(y,{icon:"pi pi-eye",variant:"text",severity:"contrast",onClick:u}),p(jo)])])}}});export{Ua as default};
