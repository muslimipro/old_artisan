import{s as w}from"./index-3shJJ7Ww.js";import{J as k,d as $,u as b,r as h,b as x,o as e,c as r,j as t,y as D,p as v,z as B,q as f,t as l,n as C,h as g,v as L,w as S,e as j,x as N,g as P,i as m,F as T,l as q}from"./index-CrrKimau.js";import{_ as I}from"./MainHeader.vue_vue_type_script_setup_true_lang-CTfKWb-t.js";import{T as M}from"./index-B2H5Bafp.js";import{s as V}from"./index-IRxqCVSs.js";import{s as z}from"./index-DL1ViM7W.js";import{L as A}from"./lessonApi-Bh_eeZwv.js";import"./index-kyck4Tmv.js";import"./index-D_2waQsa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-D1-3uCnC.js";import"./index-Cxw2yqN5.js";const F={getDocs:R};async function R(){return await k.get("v2/docs")}const E=$("docs-store",()=>{const d=b(),s=h([]),a=h(!1);async function i(){try{a.value=!0;const{data:n}=await F.getDocs();s.value=n}catch(n){d.add({severity:"error",summary:n.response.data.error,life:2e3})}finally{a.value=!1}}return{docs:s,isLoading:a,loadDocs:i}}),J={class:"absolute top-0 left-0"},O={class:"flex gap-2 w-full h-full items-end"},G={class:"flex-grow flex flex-col gap-[2px]"},H={class:"flex items-center gap-2"},K={key:0,class:"text-purple-500 h-[22px] w-4"},Q={class:"text-body-large-semibold"},U={class:"pt-[10px] flex flex-col gap-1"},W={key:0},X={key:1},Y={key:2},Z=x({__name:"ModuleCard",props:{doc:{}},setup(d){const s=d,a=L(),i=()=>{s.doc.access_status==="available"&&a.push({name:s.doc.student_progress==100?"lesson-revise":"lesson",params:{id:s.doc.lesson_id},query:{route_id:s.doc.route_id}})};async function n(){s.doc.access_status==="available"&&(await A.resetLessonById(s.doc.lesson_id),a.push({name:"lesson",params:{id:s.doc.lesson_id},query:{route_id:s.doc.route_id}}))}return(o,c)=>{const p=S,_=z,u=V,y=M;return e(),r("div",{class:"relative flex flex-col rounded-lg h-[160px] w-[360px] pt-2 px-3 cursor-pointer bg-neutral50",onClick:i},[t("div",J,[o.doc.student_progress>0?D((e(),v(p,{key:0,icon:"pi pi-refresh",variant:"link",onClick:B(n,["stop","prevent"]),class:"text-warning400"},null,512)),[[y,o.$t("startOver"),void 0,{top:!0}]]):f("",!0)]),t("div",O,[t("div",G,[t("div",H,[s.doc.access_status==="premium_restriction"?(e(),r("div",K,c[0]||(c[0]=[t("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):f("",!0),t("div",Q,l(s.doc.lesson_name),1)])]),o.doc.source_image_url?(e(),v(_,{key:0,src:s.doc.source_image_url,alt:"Image",class:"w-[120px] h-[120px]"},null,8,["src"])):f("",!0)]),t("div",U,[t("div",{class:C(["action-small-bold","text-warning400"])},[o.doc.student_progress==100||o.doc.completed?(e(),r("span",W,l(o.$t("done")),1)):o.doc.student_progress==0?(e(),r("span",X,l(o.$t("start")),1)):(e(),r("span",Y,l(o.$t("inProgress")),1))]),g(u,{value:o.doc.student_progress,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:"var(--color-warning400)"},background:"var(--color-warning50)"}},null,8,["value"])])])}}}),ss={class:"flex flex-col items-center"},es={class:"w-full flex max-w-[1280px] px-8 py-10 justify-start"},os={class:"text-heading-2-bold text-neutral900"},ts={class:"w-full max-w-[1280px] px-8 pb-10"},rs={key:1,class:"flex justify-center"},as={key:2,class:"flex flex-col gap-8"},ns={class:"flex flex-wrap gap-6 bg-white p-6 rounded-2xl"},xs=x({__name:"DocsPage",setup(d){const s=E(),{docs:a,isLoading:i}=j(s),{loadDocs:n}=s,o=N(()=>{var c;return(c=a.value)==null?void 0:c.filter(p=>p.stage==="published")});return P(()=>n()),(c,p)=>{const _=w;return e(),r("div",ss,[g(m(I)),t("div",es,[t("div",os,l(c.$t("modules")),1)]),t("div",ts,[m(i)?(e(),v(_,{key:0,class:"flex justify-center"})):m(a)?(e(),r("div",as,[t("div",ns,[(e(!0),r(T,null,q(o.value,u=>(e(),r("div",{key:u.lesson_id},[g(Z,{doc:u},null,8,["doc"])]))),128))])])):(e(),r("div",rs,"No docs yet"))])])}}});export{xs as default};
