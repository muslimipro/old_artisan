import{h as F,z as b,s as H}from"./index-CYsXQvSY.js";import{s as J}from"./index-BjU41MJV.js";import{s as M}from"./index-CYFre0Ef.js";import{J as j,b as P,a as U,u as W,r as u,x as G,o as r,c as g,j as s,h as l,i as w,k as m,D as p,p as k,q as S,t as d,T as K,v as O,w as Q}from"./index-mkT4Nz16.js";import{s as X}from"./index-Ce2l9Qw5.js";import{_ as Y}from"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-D6SJHC7A.js";import{L as Z}from"./logo-D1-3uCnC.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DPKHG_gJ.js";import"./index-CQVdX6EC.js";import"./language-DYQF8nnT.js";const T={checkActivation:se,createSchoolByCode:ae};async function se(f){try{return await j.post("/v2/activation/check",null,{params:{code:f}})}catch(e){throw console.log(e),e}}async function ae(f,e,c,I){try{return await j.post("/v2/school/register",{code:f,title:e,address:c,email:I,force_type_change:!0,country:""})}catch(n){throw console.log(n),n}}const te={class:"h-screen bg-white flex flex-col overflow-hidden relative"},le={class:"w-full h-full flex justify-center gap-6 max-w-[1440px] p-6 mx-auto"},ie={class:"hidden lg:flex flex-col w-full max-w-[684px] justify-between bg-primary rounded-2xl p-10"},oe={class:"flex items-center gap-2"},ne={class:"w-full max-w-[684px] mx-auto flex items-center justify-center relative overflow-hidden"},re={class:"flex gap-1"},de={class:"text-heading-3-semibold mb-2"},ce={class:"text-body-large-regular mb-8"},ue={key:0,class:"w-full"},me={class:"text-body-medium-regular mb-1"},ve={key:1},ge={class:"text-body-medium-regular mb-1"},pe={class:"mb-6"},fe={class:"text-body-medium-regular mb-1"},he={class:"mb-6"},_e={class:"text-body-medium-regular mb-1"},ye={class:"mb-6"},xe={key:2},be=P({__name:"SchoolSignup",setup(f){const{t:e}=U(),c=W(),I=O(),n=u(!1),V=u(!1),h=u("");async function N(){n.value=!0;try{const{data:a}=await T.checkActivation(h.value);V.value=a.is_valid,V.value?(c.add({severity:"success",summary:e("pages.login.codeIsValid"),life:2e3}),A()):c.add({severity:"error",summary:e("pages.login.codeIsInvalid"),life:2e3})}catch(a){c.add({severity:"error",summary:a,life:2e3})}finally{n.value=!1}}const i=u(0),_=G(()=>[{id:0,title:e("pages.login.enterActivationCode"),description:e("pages.login.weWillVerifyActivationCode")},{id:1,title:e("pages.login.enterSchoolInfo"),description:e("pages.login.pleaseProvideInfo")},{id:2,title:e("pages.login.registrationSuccess"),description:e("pages.login.weHaveSentLoginDetails")}]);function A(){i.value<_.value.length-1&&i.value++}const v=u(!1),q=u({name:"",address:"",email:""}),z=F(b.object({name:b.string().min(1,{message:e("pages.login.nameIsRequired")}).max(100,{message:e("pages.login.max100chars")}),address:b.string().min(1,{message:e("pages.login.addressIsRequired")}).max(100,{message:e("pages.login.max100chars")}),email:b.string().email({message:e("pages.settings.emailInvalid")}).min(1,{message:e("pages.login.emailIsRequired")}).max(100,{message:e("pages.login.max100chars")})})),R=async a=>{if(!v.value&&a.valid){v.value=!0;try{await T.createSchoolByCode(h.value,a.states.name.value,a.states.address.value,a.states.email.value),A()}catch(t){c.add({severity:"error",summary:t.response.data.error,life:3e3})}finally{v.value=!1}}};return(a,t)=>{const D=X,y=Q,x=M,C=J,E=H;return r(),g("div",te,[s("div",le,[s("div",ie,[s("div",oe,[l(D,{src:w(Z),width:"40"},null,8,["src"]),t[3]||(t[3]=s("p",{class:"text-heading-2-bold text-black"},"Artisan",-1))]),t[4]||(t[4]=s("div",{class:"text-display-small-bold text-neutral900"},[m(" Building"),s("br"),s("span",{class:"text-white"},"creative"),s("br"),m(" learners who"),s("br"),m(" love to grow ")],-1))]),s("div",ne,[l(w(Y),{class:"absolute top-0 left-1/2 -translate-x-1/2"}),l(K,{name:"slide-fade",mode:"out-in",class:"w-full max-w-[540px] flex"},{default:p(()=>[(r(),g("div",{key:i.value,class:"w-full flex flex-col"},[s("div",re,[i.value>0&&i.value!=_.value.length-1?(r(),k(y,{key:0,icon:"pi pi-chevron-left",class:"h-6 w-6",severity:"secondary",variant:"text",onClick:t[0]||(t[0]=o=>i.value--)})):S("",!0),s("div",de,d(_.value[i.value].title),1)]),s("div",ce,d(_.value[i.value].description),1),i.value===0?(r(),g("div",ue,[s("div",me,d(a.$t("pages.login.activationCode")),1),l(x,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=o=>h.value=o),type:"text",fluid:"",class:"mb-6"},null,8,["modelValue"]),l(y,{label:a.$t("pages.login.continue"),class:"w-full h-12",onClick:N,loading:n.value,disabled:n.value},null,8,["label","loading","disabled"])])):i.value===1?(r(),g("div",ve,[l(E,{initialValues:q.value,resolver:w(z),onSubmit:R},{default:p(o=>{var $,B,L;return[s("div",ge,d(a.$t("pages.login.schoolName")),1),s("div",pe,[l(x,{id:"name",name:"name",type:"text",fluid:""}),($=o.name)!=null&&$.invalid?(r(),k(C,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>[m(d(o.name.error.message),1)]),_:2},1024)):S("",!0)]),s("div",fe,d(a.$t("pages.login.schoolAddress")),1),s("div",he,[l(x,{id:"address",name:"address",type:"text",fluid:""}),(B=o.address)!=null&&B.invalid?(r(),k(C,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>[m(d(o.address.error.message),1)]),_:2},1024)):S("",!0)]),s("div",_e,d(a.$t("pages.login.schoolEmail")),1),s("div",ye,[l(x,{id:"email",name:"email",type:"text",fluid:""}),(L=o.email)!=null&&L.invalid?(r(),k(C,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>[m(d(o.email.error.message),1)]),_:2},1024)):S("",!0)]),l(y,{label:a.$t("pages.login.registerSchool"),type:"submit",class:"w-full h-12",loading:v.value,disabled:v.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])):(r(),g("div",xe,[l(y,{label:a.$t("pages.login.goToLogin"),class:"w-full h-12",onClick:t[2]||(t[2]=o=>w(I).replace({name:"login"})),loading:n.value,disabled:n.value},null,8,["label","loading","disabled"])]))]))]),_:1})])])])}}}),je=ee(be,[["__scopeId","data-v-1fe9b504"]]);export{je as default};
