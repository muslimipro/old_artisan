import{s as B}from"./index-CtaZDtwr.js";import{b as N,u as $,f as b,e as I,r as s,g as P,o as n,p as i,D as p,q as u,i as e,h as f,j as R,C as V,v as j,w as D}from"./index-DKpYZndv.js";import{s as L}from"./index-BcI8EnQN.js";import{_ as T}from"./ClassesTable.vue_vue_type_script_setup_true_lang-DDGz91XN.js";import{_ as q}from"./SchoolInfo.vue_vue_type_script_setup_true_lang-sOJ_BYnZ.js";import{S as d}from"./schoolApi-ly85vefR.js";import{m as A}from"./mapClassFromDto-DgC5mjEL.js";import"./index-CRjM1jwi.js";import"./index-C0_NxIx7.js";import"./index-CuTemcOB.js";import"./index-OdaeILGb.js";import"./index-Dc-zD-v2.js";import"./index-C_i3kvzb.js";import"./index-CQW4Wi6y.js";import"./index-CdXgfwks.js";import"./index-BPXX-HAT.js";import"./index-BHdrZhke.js";import"./index-DG5KcTt3.js";import"./index-D9s7_hLW.js";import"./index-BnLhgIz5.js";import"./index-BZMtL22D.js";const F={class:"flex gap-2"},mo=N({__name:"SchoolOverviewPage",setup(M){const _=$(),l=V(),v=j(),h=b(),{userInfo:g}=I(h),a=s(!1),t=s(null);async function y(){try{a.value=!0;const{data:o}=await d.getSchoolById(Number(l.params.id));t.value=o}catch(o){console.log(o)}finally{a.value=!1}}const c=s([]),r=s(!1);async function C(){try{r.value=!0;const{data:o}=await d.getSchoolClassesById(Number(l.params.id));c.value=(o==null?void 0:o.map(A))??[]}catch(o){_.add({severity:"error",summary:o.response.data.error,life:2e3})}finally{r.value=!1}}return P(()=>{y(),C()}),(o,O)=>{const S=L,x=D,k=B;return n(),i(k,{class:"flex-grow flex flex-col gap-2"},{default:p(()=>[a.value?(n(),i(S,{key:0,class:"flex justify-center"})):u("",!0),t.value?(n(),i(e(q),{key:1,school:t.value},null,8,["school"])):u("",!0),f(e(T),{classes:c.value,loading:r.value},{actions:p(({row:w})=>[R("div",F,[f(x,{icon:"pi pi-angle-right",outlined:"",rounded:"",severity:"info",onClick:U=>{var m;return e(v).push({name:((m=e(g))==null?void 0:m.user_type)=="super_admin"?"admin-class":"supervisor-class",params:{id:w.id}})}},null,8,["onClick"])])]),_:1},8,["classes","loading"])]),_:1})}}});export{mo as default};
