import{s as N,a as V}from"./index-eMhY5NLX.js";import{s as x}from"./index-CfTV9Mco.js";import{a as C,b as F}from"./index-XWd1g6Xq.js";import{s as k}from"./index-CKslPvHa.js";import{b as I,r as p,g as A,o as u,c as f,h as a,D as t,j as s,t as l,q as B,k as g,aH as D,w as M}from"./index-AClBedbW.js";import{S as T}from"./schoolApi-CR2RV8a3.js";import{m as P}from"./mapStudentFromDto-D4MSietx.js";import"./index-BqfOP99U.js";import"./index-DDx-e1KX.js";import"./index-EYPUebmY.js";import"./index-3LekTigX.js";import"./index-Cz8lbA_9.js";import"./index-NBixiio1.js";import"./index-CRBI1kF9.js";import"./index-r2exBSIy.js";import"./index-BAEmVBEP.js";const U={class:"flex-grow min-w-0 pb-4 mb-4 bg-white rounded-md border"},O={class:"flex items-center"},j={class:"flex-grow flex gap-2 items-center"},q={key:0,class:"text-2xl"},se=I({__name:"StudentsPage",setup(E){const m=p(!1),d=p([]),c=p(),r=p();(()=>{r.value={global:{value:null,matchMode:D.CONTAINS}}})();const h=()=>{c.value.exportCSV()};async function v(){try{m.value=!0;const{data:e}=await T.getStudents();d.value=(e==null?void 0:e.map(P))??[]}catch(e){console.log(e)}finally{m.value=!1}}return A(v),(e,n)=>{const b=M,_=C,$=k,y=F,S=x,i=N,w=V;return u(),f("div",U,[a(w,{ref_key:"dt",ref:c,filters:r.value,"onUpdate:filters":n[1]||(n[1]=o=>r.value=o),value:d.value,dataKey:"id",loading:m.value,scrollable:"",globalFilterFields:["name","email","className","xp"],class:"rounded-md overflow-hidden w-full",paginator:"",rows:10,rowsPerPageOptions:[5,10,25]},{header:t(()=>[s("div",O,[s("div",j,[d.value?(u(),f("div",q,l(e.$t("pages.school.students"))+" - "+l(d.value.length),1)):B("",!0)]),a(b,{label:e.$t("export"),icon:"pi pi-upload",severity:"info",variant:"outlined",class:"mr-2",onClick:h},null,8,["label"]),a(y,null,{default:t(()=>[a(_,null,{default:t(()=>n[2]||(n[2]=[s("i",{class:"pi pi-search"},null,-1)])),_:1}),a($,{modelValue:r.value.global.value,"onUpdate:modelValue":n[0]||(n[0]=o=>r.value.global.value=o),placeholder:e.$t("pages.school.search")},null,8,["modelValue","placeholder"])]),_:1})])]),empty:t(()=>[g(l(e.$t("pages.school.noStudentsFound")),1)]),loading:t(()=>[g(l(e.$t("pages.school.loadingStudents")),1)]),default:t(()=>[a(i,{header:e.$t("pages.school.avatar"),sortable:""},{body:t(({data:o})=>[a(S,{image:o.smallAvatarUrl},null,8,["image"])]),_:1},8,["header"]),a(i,{field:"name",header:e.$t("pages.school.name"),sortable:""},{body:t(({data:o})=>[s("div",null,l(`${o.name}`),1)]),_:1},8,["header"]),a(i,{field:"email",header:e.$t("pages.school.email"),sortable:""},{body:t(({data:o})=>[s("div",null,l(`${o.email}`),1)]),_:1},8,["header"]),a(i,{field:"className",header:e.$t("pages.school.class"),sortable:""},{body:t(({data:o})=>[s("div",null,l(`${o.className}`),1)]),_:1},8,["header"]),a(i,{field:"xp",header:e.$t("pages.school.xp"),sortable:""},{body:t(({data:o})=>[s("div",null,l(`${o.xp}`),1)]),_:1},8,["header"])]),_:1},8,["filters","value","loading"])])}}});export{se as default};
