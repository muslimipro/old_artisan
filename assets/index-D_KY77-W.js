import{B as X,m as L,o as c,p as x,D as U,y as ae,Q as j,j as $,W as N,a4 as qe,q as V,T as Je,n as W,s as te,a5 as We,a6 as Ie,a7 as Qe,V as Ye,a8 as Xe,a9 as Ve,P as ue,c as y,F as K,l as Y,h as p,t as ee,J as M,b as I,aa as Be,ab as we,r as _,x as he,g as G,E,w as z,ac as _e,i as A,C as Q,d as Ze,u as et,e as H,ad as tt,v as $e,L as ke,z as xe,a1 as nt,a2 as ot,k as fe,A as at}from"./index-BwcPjnJP.js";import{_ as it}from"./EditLocaleSelector.vue_vue_type_script_setup_true_lang-3sl2N1CR.js";import{u as Ae}from"./useLocaleStore-B7zVBa3-.js";import{L as De}from"./lessonApi-TWkH8e7e.js";import{m as lt}from"./mapLessonFromDto-D3cEBYeg.js";import{U as Z}from"./unitApi-Dy8n2yYS.js";import{s as st}from"./index-C691Vja9.js";import{s as Ee}from"./index-BNvv-9bF.js";import{s as rt}from"./index-Bht399_o.js";import{d as ct}from"./defaultConfirmDeleteOptions-BHu3VNzp.js";import{s as dt}from"./index-DWb5uelz.js";import"./store-BdheW5X_.js";import{_ as pe,T as Re}from"./CodeEditorView.vue_vue_type_script_setup_true_lang-BBIjKhL2.js";import{s as Ne,a as je}from"./index-BBH5MFRS.js";import{s as ut}from"./index-c6iTNCJH.js";import{s as ve}from"./index-J_wi4mxH.js";import{s as He}from"./index-B4dxx41c.js";import{C as Fe}from"./cloudStorageApi-DuiM6M5f.js";import{_ as pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as vt}from"./index-Bqa5yC9A.js";import{s as ht}from"./index-w-z7np8T.js";import{s as Ce}from"./index-X0HA0JnL.js";import{A as ie}from"./language-DYQF8nnT.js";import{u as ft}from"./index-D_OVpPyX.js";import{s as gt}from"./index-DgTSVOMx.js";import{s as mt}from"./index-MPBcGjo-.js";import{T as bt}from"./index-BbV5txCL.js";import{s as yt}from"./index-D2oMMRm7.js";import"./mapUnitFromDto-DVWJHO4f.js";import"./transformUnitDtosToPages-hsgZNhAG.js";import"./index-D9kQDm6b.js";import"./index-CXxu4Mjq.js";import"./index-DH5eiR2q.js";var wt={root:"p-accordioncontent",content:"p-accordioncontent-content"},_t=X.extend({name:"accordioncontent",classes:wt}),$t={name:"BaseAccordionContent",extends:te,props:{as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:_t,provide:function(){return{$pcAccordionContent:this,$parentInstance:this}}},Pe={name:"AccordionContent",extends:$t,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},ariaLabelledby:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},attrs:function(){return L(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{id:this.id,role:"region","aria-labelledby":this.ariaLabelledby,"data-pc-name":"accordioncontent","data-p-active":this.$pcAccordionPanel.active}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}}};function kt(t,n,e,i,s,o){return t.asChild?N(t.$slots,"default",{key:1,class:W(t.cx("root")),active:o.$pcAccordionPanel.active,a11yAttrs:o.a11yAttrs}):(c(),x(Je,L({key:0,name:"p-toggleable-content"},t.ptm("transition",o.ptParams)),{default:U(function(){return[!o.$pcAccordion.lazy||o.$pcAccordionPanel.active?ae((c(),x(j(t.as),L({key:0,class:t.cx("root")},o.attrs),{default:U(function(){return[$("div",L({class:t.cx("content")},t.ptm("content",o.ptParams)),[N(t.$slots,"default")],16)]}),_:3},16,["class"])),[[qe,o.$pcAccordion.lazy?!0:o.$pcAccordionPanel.active]]):V("",!0)]}),_:3},16))}Pe.render=kt;var xt={root:"p-accordionheader",toggleicon:"p-accordionheader-toggle-icon"},At=X.extend({name:"accordionheader",classes:xt}),Ct={name:"BaseAccordionHeader",extends:te,props:{as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:At,provide:function(){return{$pcAccordionHeader:this,$parentInstance:this}}},Te={name:"AccordionHeader",extends:Ct,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],methods:{onFocus:function(){this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(n){switch(n.code){case"ArrowDown":this.onArrowDownKey(n);break;case"ArrowUp":this.onArrowUpKey(n);break;case"Home":this.onHomeKey(n);break;case"End":this.onEndKey(n);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(n);break}},onArrowDownKey:function(n){var e=this.findNextPanel(this.findPanel(n.currentTarget));e?this.changeFocusedPanel(n,e):this.onHomeKey(n),n.preventDefault()},onArrowUpKey:function(n){var e=this.findPrevPanel(this.findPanel(n.currentTarget));e?this.changeFocusedPanel(n,e):this.onEndKey(n),n.preventDefault()},onHomeKey:function(n){var e=this.findFirstPanel();this.changeFocusedPanel(n,e),n.preventDefault()},onEndKey:function(n){var e=this.findLastPanel();this.changeFocusedPanel(n,e),n.preventDefault()},onEnterKey:function(n){this.changeActiveValue(),n.preventDefault()},findPanel:function(n){return n==null?void 0:n.closest('[data-pc-name="accordionpanel"]')},findHeader:function(n){return We(n,'[data-pc-name="accordionheader"]')},findNextPanel:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e?n:n.nextElementSibling;return i?Ie(i,"data-p-disabled")?this.findNextPanel(i):this.findHeader(i):null},findPrevPanel:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e?n:n.previousElementSibling;return i?Ie(i,"data-p-disabled")?this.findPrevPanel(i):this.findHeader(i):null},findFirstPanel:function(){return this.findNextPanel(this.$pcAccordion.$el.firstElementChild,!0)},findLastPanel:function(){return this.findPrevPanel(this.$pcAccordion.$el.lastElementChild,!0)},changeActiveValue:function(){this.$pcAccordion.updateValue(this.$pcAccordionPanel.value)},changeFocusedPanel:function(n,e){Qe(this.findHeader(e))}},computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},ariaControls:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},attrs:function(){return L(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.$pcAccordionPanel.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.$pcAccordion.tabindex,"aria-expanded":this.$pcAccordionPanel.active,"aria-controls":this.ariaControls,"data-pc-name":"accordionheader","data-p-disabled":this.$pcAccordionPanel.disabled,"data-p-active":this.$pcAccordionPanel.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}},components:{ChevronUpIcon:Ee,ChevronDownIcon:rt},directives:{ripple:Ye}};function Pt(t,n,e,i,s,o){var a=Xe("ripple");return t.asChild?N(t.$slots,"default",{key:1,class:W(t.cx("root")),active:o.$pcAccordionPanel.active,a11yAttrs:o.a11yAttrs,onClick:o.onClick}):ae((c(),x(j(t.as),L({key:0,class:t.cx("root"),onClick:o.onClick},o.attrs),{default:U(function(){return[N(t.$slots,"default",{active:o.$pcAccordionPanel.active}),N(t.$slots,"toggleicon",{active:o.$pcAccordionPanel.active,class:W(t.cx("toggleicon"))},function(){return[o.$pcAccordionPanel.active?(c(),x(j(o.$pcAccordion.$slots.collapseicon?o.$pcAccordion.$slots.collapseicon:o.$pcAccordion.collapseIcon?"span":"ChevronDownIcon"),L({key:0,class:[o.$pcAccordion.collapseIcon,t.cx("toggleicon")],"aria-hidden":"true"},t.ptm("toggleicon",o.ptParams)),null,16,["class"])):(c(),x(j(o.$pcAccordion.$slots.expandicon?o.$pcAccordion.$slots.expandicon:o.$pcAccordion.expandIcon?"span":"ChevronUpIcon"),L({key:1,class:[o.$pcAccordion.expandIcon,t.cx("toggleicon")],"aria-hidden":"true"},t.ptm("toggleicon",o.ptParams)),null,16,["class"]))]})]}),_:3},16,["class","onClick"])),[[a]])}Te.render=Pt;var Tt={root:function(n){var e=n.instance,i=n.props;return["p-accordionpanel",{"p-accordionpanel-active":e.active,"p-disabled":i.disabled}]}},St=X.extend({name:"accordionpanel",classes:Tt}),Ut={name:"BaseAccordionPanel",extends:te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:St,provide:function(){return{$pcAccordionPanel:this,$parentInstance:this}}},Se={name:"AccordionPanel",extends:Ut,inheritAttrs:!1,inject:["$pcAccordion"],computed:{active:function(){return this.$pcAccordion.isItemActive(this.value)},attrs:function(){return L(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{"data-pc-name":"accordionpanel","data-p-disabled":this.disabled,"data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function Lt(t,n,e,i,s,o){return t.asChild?N(t.$slots,"default",{key:1,class:W(t.cx("root")),active:o.active,a11yAttrs:o.a11yAttrs}):(c(),x(j(t.as),L({key:0,class:t.cx("root")},o.attrs),{default:U(function(){return[N(t.$slots,"default")]}),_:3},16,["class"]))}Se.render=Lt;var It=function(n){var e=n.dt;return`
.p-accordionpanel {
    display: flex;
    flex-direction: column;
    border-style: solid;
    border-width: `.concat(e("accordion.panel.border.width"),`;
    border-color: `).concat(e("accordion.panel.border.color"),`;
}

.p-accordionheader {
    all: unset;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: `).concat(e("accordion.header.padding"),`;
    color: `).concat(e("accordion.header.color"),`;
    background: `).concat(e("accordion.header.background"),`;
    border-style: solid;
    border-width: `).concat(e("accordion.header.border.width"),`;
    border-color: `).concat(e("accordion.header.border.color"),`;
    font-weight: `).concat(e("accordion.header.font.weight"),`;
    border-radius: `).concat(e("accordion.header.border.radius"),`;
    transition: background `).concat(e("accordion.transition.duration"),"; color ").concat(e("accordion.transition.duration"),"color ").concat(e("accordion.transition.duration"),", outline-color ").concat(e("accordion.transition.duration"),", box-shadow ").concat(e("accordion.transition.duration"),`;
    outline-color: transparent;
}

.p-accordionpanel:first-child > .p-accordionheader {
    border-width: `).concat(e("accordion.header.first.border.width"),`;
    border-start-start-radius: `).concat(e("accordion.header.first.top.border.radius"),`;
    border-start-end-radius: `).concat(e("accordion.header.first.top.border.radius"),`;
}

.p-accordionpanel:last-child > .p-accordionheader {
    border-end-start-radius: `).concat(e("accordion.header.last.bottom.border.radius"),`;
    border-end-end-radius: `).concat(e("accordion.header.last.bottom.border.radius"),`;
}

.p-accordionpanel:last-child.p-accordionpanel-active > .p-accordionheader {
    border-end-start-radius: `).concat(e("accordion.header.last.active.bottom.border.radius"),`;
    border-end-end-radius: `).concat(e("accordion.header.last.active.bottom.border.radius"),`;
}

.p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.color"),`;
}

.p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {
    box-shadow: `).concat(e("accordion.header.focus.ring.shadow"),`;
    outline: `).concat(e("accordion.header.focus.ring.width")," ").concat(e("accordion.header.focus.ring.style")," ").concat(e("accordion.header.focus.ring.color"),`;
    outline-offset: `).concat(e("accordion.header.focus.ring.offset"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) > .p-accordionheader:hover {
    background: `).concat(e("accordion.header.hover.background"),`;
    color: `).concat(e("accordion.header.hover.color"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader {
    background: `).concat(e("accordion.header.active.background"),`;
    color: `).concat(e("accordion.header.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover {
    background: `).concat(e("accordion.header.active.hover.background"),`;
    color: `).concat(e("accordion.header.active.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.active.hover.color"),`;
}

.p-accordioncontent-content {
    border-style: solid;
    border-width: `).concat(e("accordion.content.border.width"),`;
    border-color: `).concat(e("accordion.content.border.color"),`;
    background-color: `).concat(e("accordion.content.background"),`;
    color: `).concat(e("accordion.content.color"),`;
    padding: `).concat(e("accordion.content.padding"),`;
}
`)},Vt={root:"p-accordion p-component"},Bt=X.extend({name:"accordion",theme:It,classes:Vt}),Dt={name:"BaseAccordion",extends:te,props:{value:{type:[String,Number,Array],default:void 0},multiple:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},expandIcon:{type:String,default:void 0},collapseIcon:{type:String,default:void 0},activeIndex:{type:[Number,Array],default:null}},style:Bt,provide:function(){return{$pcAccordion:this,$parentInstance:this}}},Oe={name:"Accordion",extends:Dt,inheritAttrs:!1,emits:["update:value","update:activeIndex","tab-open","tab-close","tab-click"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(n){this.id=n||Ve()},value:function(n){this.d_value=n},activeIndex:{immediate:!0,handler:function(n){this.hasAccordionTab&&(this.d_value=this.multiple?n==null?void 0:n.map(String):n==null?void 0:n.toString())}}},mounted:function(){this.id=this.id||Ve()},methods:{isItemActive:function(n){var e;return this.multiple?(e=this.d_value)===null||e===void 0?void 0:e.includes(n):this.d_value===n},updateValue:function(n){var e,i=this.isItemActive(n);this.multiple?i?this.d_value=this.d_value.filter(function(s){return s!==n}):this.d_value?this.d_value.push(n):this.d_value=[n]:this.d_value=i?null:n,this.$emit("update:value",this.d_value),this.$emit("update:activeIndex",this.multiple?(e=this.d_value)===null||e===void 0?void 0:e.map(Number):Number(this.d_value)),this.$emit(i?"tab-close":"tab-open",{originalEvent:void 0,index:Number(n)})},isAccordionTab:function(n){return n.type.name==="AccordionTab"},getTabProp:function(n,e){return n.props?n.props[e]:void 0},getKey:function(n,e){return this.getTabProp(n,"header")||e},getHeaderPT:function(n,e){var i=this;return{root:L({onClick:function(o){return i.onTabClick(o,e)}},this.getTabProp(n,"headerProps"),this.getTabPT(n,"header",e)),toggleicon:L(this.getTabProp(n,"headeractionprops"),this.getTabPT(n,"headeraction",e))}},getContentPT:function(n,e){return{root:L(this.getTabProp(n,"contentProps"),this.getTabPT(n,"toggleablecontent",e)),transition:this.getTabPT(n,"transition",e),content:this.getTabPT(n,"content",e)}},getTabPT:function(n,e,i){var s=this.tabs.length,o={props:n.props||{},parent:{instance:this,props:this.$props,state:this.$data},context:{index:i,count:s,first:i===0,last:i===s-1,active:this.isItemActive("".concat(i))}};return L(this.ptm("accordiontab.".concat(e),o),this.ptmo(this.getTabProp(n,"pt"),e,o))},onTabClick:function(n,e){this.$emit("tab-click",{originalEvent:n,index:e})}},computed:{tabs:function(){var n=this;return this.$slots.default().reduce(function(e,i){return n.isAccordionTab(i)?e.push(i):i.children&&i.children instanceof Array&&i.children.forEach(function(s){n.isAccordionTab(s)&&e.push(s)}),e},[])},hasAccordionTab:function(){return this.tabs.length}},components:{AccordionPanel:Se,AccordionHeader:Te,AccordionContent:Pe,ChevronUpIcon:Ee,ChevronRightIcon:st}};function Ft(t,n,e,i,s,o){var a=ue("AccordionHeader"),l=ue("AccordionContent"),u=ue("AccordionPanel");return c(),y("div",L({class:t.cx("root")},t.ptmi("root")),[o.hasAccordionTab?(c(!0),y(K,{key:0},Y(o.tabs,function(d,r){return c(),x(u,{key:o.getKey(d,r),value:"".concat(r),pt:{root:o.getTabPT(d,"root",r)},disabled:o.getTabProp(d,"disabled")},{default:U(function(){return[p(a,{class:W(o.getTabProp(d,"headerClass")),pt:o.getHeaderPT(d,r)},{toggleicon:U(function(m){return[m.active?(c(),x(j(t.$slots.collapseicon?t.$slots.collapseicon:t.collapseIcon?"span":"ChevronDownIcon"),L({key:0,class:[t.collapseIcon,m.class],"aria-hidden":"true",ref_for:!0},o.getTabPT(d,"headericon",r)),null,16,["class"])):(c(),x(j(t.$slots.expandicon?t.$slots.expandicon:t.expandIcon?"span":"ChevronUpIcon"),L({key:1,class:[t.expandIcon,m.class],"aria-hidden":"true",ref_for:!0},o.getTabPT(d,"headericon",r)),null,16,["class"]))]}),default:U(function(){return[d.children&&d.children.headericon?(c(),x(j(d.children.headericon),{key:0,isTabActive:o.isItemActive("".concat(r)),active:o.isItemActive("".concat(r)),index:r},null,8,["isTabActive","active","index"])):V("",!0),d.props&&d.props.header?(c(),y("span",L({key:1,ref_for:!0},o.getTabPT(d,"headertitle",r)),ee(d.props.header),17)):V("",!0),d.children&&d.children.header?(c(),x(j(d.children.header),{key:2})):V("",!0)]}),_:2},1032,["class","pt"]),p(l,{pt:o.getContentPT(d,r)},{default:U(function(){return[(c(),x(j(d)))]}),_:2},1032,["pt"])]}),_:2},1032,["value","pt","disabled"])}),128)):N(t.$slots,"default",{key:1})],16)}Oe.render=Ft;var zt=function(n){var e=n.dt;return`
.p-inputgroup,
.p-inputgroup .p-iconfield,
.p-inputgroup .p-floatlabel,
.p-inputgroup .p-iftalabel {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroup .p-inputtext,
.p-inputgroup .p-inputwrapper {
    flex: 1 1 auto;
    width: 1%;
}

.p-inputgroupaddon {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: `.concat(e("inputgroup.addon.padding"),`;
    background: `).concat(e("inputgroup.addon.background"),`;
    color: `).concat(e("inputgroup.addon.color"),`;
    border-block-start: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
    border-block-end: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
    min-width: `).concat(e("inputgroup.addon.min.width"),`;
}

.p-inputgroupaddon:first-child,
.p-inputgroupaddon + .p-inputgroupaddon {
    border-inline-start: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:last-child {
    border-inline-end: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:has(.p-button) {
    padding: 0;
    overflow: hidden;
}

.p-inputgroupaddon .p-button {
    border-radius: 0;
}

.p-inputgroup > .p-component,
.p-inputgroup > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iconfield > .p-component,
.p-inputgroup > .p-floatlabel > .p-component,
.p-inputgroup > .p-floatlabel > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel > .p-component,
.p-inputgroup > .p-iftalabel > .p-inputwrapper > .p-component {
    border-radius: 0;
    margin: 0;
}

.p-inputgroupaddon:first-child,
.p-inputgroup > .p-component:first-child,
.p-inputgroup > .p-inputwrapper:first-child > .p-component,
.p-inputgroup > .p-iconfield:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-inputwrapper > .p-component {
    border-start-start-radius: `).concat(e("inputgroup.addon.border.radius"),`;
    border-end-start-radius: `).concat(e("inputgroup.addon.border.radius"),`;
}

.p-inputgroupaddon:last-child,
.p-inputgroup > .p-component:last-child,
.p-inputgroup > .p-inputwrapper:last-child > .p-component,
.p-inputgroup > .p-iconfield:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-inputwrapper > .p-component {
    border-start-end-radius: `).concat(e("inputgroup.addon.border.radius"),`;
    border-end-end-radius: `).concat(e("inputgroup.addon.border.radius"),`;
}

.p-inputgroup .p-component:focus,
.p-inputgroup .p-component.p-focus,
.p-inputgroup .p-inputwrapper-focus,
.p-inputgroup .p-component:focus ~ label,
.p-inputgroup .p-component.p-focus ~ label,
.p-inputgroup .p-inputwrapper-focus ~ label {
    z-index: 1;
}

.p-inputgroup > .p-button:not(.p-button-icon-only) {
    width: auto;
}

.p-inputgroup .p-iconfield + .p-iconfield .p-inputtext {
    border-inline-start: 0;
}
`)},Et={root:"p-inputgroup"},Rt=X.extend({name:"inputgroup",theme:zt,classes:Et}),Nt={name:"BaseInputGroup",extends:te,style:Rt,provide:function(){return{$pcInputGroup:this,$parentInstance:this}}},Ke={name:"InputGroup",extends:Nt,inheritAttrs:!1};function jt(t,n,e,i,s,o){return c(),y("div",L({class:t.cx("root")},t.ptmi("root")),[N(t.$slots,"default")],16)}Ke.render=jt;var Ht={root:"p-inputgroupaddon"},Ot=X.extend({name:"inputgroupaddon",classes:Ht}),Kt={name:"BaseInputGroupAddon",extends:te,style:Ot,provide:function(){return{$pcInputGroupAddon:this,$parentInstance:this}}},Me={name:"InputGroupAddon",extends:Kt,inheritAttrs:!1};function Mt(t,n,e,i,s,o){return c(),y("div",L({class:t.cx("root")},t.ptmi("root")),[N(t.$slots,"default")],16)}Me.render=Mt;var Gt=function(n){var e=n.dt;return`
.p-toggleswitch {
    display: inline-block;
    width: `.concat(e("toggleswitch.width"),`;
    height: `).concat(e("toggleswitch.height"),`;
}

.p-toggleswitch-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border-radius: `).concat(e("toggleswitch.border.radius"),`;
}

.p-toggleswitch-slider {
    display: inline-block;
    cursor: pointer;
    width: 100%;
    height: 100%;
    border-width: `).concat(e("toggleswitch.border.width"),`;
    border-style: solid;
    border-color: `).concat(e("toggleswitch.border.color"),`;
    background: `).concat(e("toggleswitch.background"),`;
    transition: background `).concat(e("toggleswitch.transition.duration"),", color ").concat(e("toggleswitch.transition.duration"),", border-color ").concat(e("toggleswitch.transition.duration"),", outline-color ").concat(e("toggleswitch.transition.duration"),", box-shadow ").concat(e("toggleswitch.transition.duration"),`;
    border-radius: `).concat(e("toggleswitch.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(e("toggleswitch.shadow"),`;
}

.p-toggleswitch-handle {
    position: absolute;
    top: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: `).concat(e("toggleswitch.handle.background"),`;
    color: `).concat(e("toggleswitch.handle.color"),`;
    width: `).concat(e("toggleswitch.handle.size"),`;
    height: `).concat(e("toggleswitch.handle.size"),`;
    inset-inline-start: `).concat(e("toggleswitch.gap"),`;
    margin-block-start: calc(-1 * calc(`).concat(e("toggleswitch.handle.size"),` / 2));
    border-radius: `).concat(e("toggleswitch.handle.border.radius"),`;
    transition: background `).concat(e("toggleswitch.transition.duration"),", color ").concat(e("toggleswitch.transition.duration"),", inset-inline-start ").concat(e("toggleswitch.slide.duration"),", box-shadow ").concat(e("toggleswitch.slide.duration"),`;
}

.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.checked.background"),`;
    border-color: `).concat(e("toggleswitch.checked.border.color"),`;
}

.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.checked.background"),`;
    color: `).concat(e("toggleswitch.handle.checked.color"),`;
    inset-inline-start: calc(`).concat(e("toggleswitch.width")," - calc(").concat(e("toggleswitch.handle.size")," + ").concat(e("toggleswitch.gap"),`));
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.hover.background"),`;
    border-color: `).concat(e("toggleswitch.hover.border.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.hover.background"),`;
    color: `).concat(e("toggleswitch.handle.hover.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.checked.hover.background"),`;
    border-color: `).concat(e("toggleswitch.checked.hover.border.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.checked.hover.background"),`;
    color: `).concat(e("toggleswitch.handle.checked.hover.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible) .p-toggleswitch-slider {
    box-shadow: `).concat(e("toggleswitch.focus.ring.shadow"),`;
    outline: `).concat(e("toggleswitch.focus.ring.width")," ").concat(e("toggleswitch.focus.ring.style")," ").concat(e("toggleswitch.focus.ring.color"),`;
    outline-offset: `).concat(e("toggleswitch.focus.ring.offset"),`;
}

.p-toggleswitch.p-invalid > .p-toggleswitch-slider {
    border-color: `).concat(e("toggleswitch.invalid.border.color"),`;
}

.p-toggleswitch.p-disabled {
    opacity: 1;
}

.p-toggleswitch.p-disabled .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.disabled.background"),`;
}

.p-toggleswitch.p-disabled .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.disabled.background"),`;
}
`)},qt={root:{position:"relative"}},Jt={root:function(n){var e=n.instance,i=n.props;return["p-toggleswitch p-component",{"p-toggleswitch-checked":e.checked,"p-disabled":i.disabled,"p-invalid":e.$invalid}]},input:"p-toggleswitch-input",slider:"p-toggleswitch-slider",handle:"p-toggleswitch-handle"},Wt=X.extend({name:"toggleswitch",theme:Gt,classes:Jt,inlineStyles:qt}),Qt={name:"BaseToggleSwitch",extends:ht,props:{trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Wt,provide:function(){return{$pcToggleSwitch:this,$parentInstance:this}}},Ge={name:"ToggleSwitch",extends:Qt,inheritAttrs:!1,emits:["change","focus","blur"],methods:{getPTOptions:function(n){var e=n==="root"?this.ptmi:this.ptm;return e(n,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(n){if(!this.disabled&&!this.readonly){var e=this.checked?this.falseValue:this.trueValue;this.writeValue(e,n),this.$emit("change",n)}},onFocus:function(n){this.$emit("focus",n)},onBlur:function(n){var e,i;this.$emit("blur",n),(e=(i=this.formField).onBlur)===null||e===void 0||e.call(i,n)}},computed:{checked:function(){return this.d_value===this.trueValue}}},Yt=["data-p-checked","data-p-disabled"],Xt=["id","checked","tabindex","disabled","readonly","aria-checked","aria-labelledby","aria-label","aria-invalid"];function Zt(t,n,e,i,s,o){return c(),y("div",L({class:t.cx("root"),style:t.sx("root")},o.getPTOptions("root"),{"data-p-checked":o.checked,"data-p-disabled":t.disabled}),[$("input",L({id:t.inputId,type:"checkbox",role:"switch",class:[t.cx("input"),t.inputClass],style:t.inputStyle,checked:o.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,"aria-checked":o.checked,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,onFocus:n[0]||(n[0]=function(){return o.onFocus&&o.onFocus.apply(o,arguments)}),onBlur:n[1]||(n[1]=function(){return o.onBlur&&o.onBlur.apply(o,arguments)}),onChange:n[2]||(n[2]=function(){return o.onChange&&o.onChange.apply(o,arguments)})},o.getPTOptions("input")),null,16,Xt),$("div",L({class:t.cx("slider")},o.getPTOptions("slider")),[$("div",L({class:t.cx("handle")},o.getPTOptions("handle")),[N(t.$slots,"handle",{checked:o.checked})],16)],16)],16,Yt)}Ge.render=Zt;const J={hideLesson:en,modifyLesson:tn,publishLesson:nn,sendLessonForReview:on,cancelLessonReview:an,startLessonReview:ln,acceptLesson:sn,rejectLesson:rn,editLesson:cn};async function en(t){return await M.patch(`v2/lesson/${t}/hide`)}async function tn(t){return await M.patch(`v2/lesson/${t}/modify`)}async function nn(t){return await M.patch(`v2/lesson/${t}/publish`)}async function on(t){return await M.patch(`v2/lesson/${t}/review/send`)}async function an(t){return await M.patch(`v2/lesson/${t}/review/cancel`)}async function ln(t){return await M.patch(`v2/lesson/${t}/review/start`)}async function sn(t){return await M.patch(`v2/lesson/${t}/review/accept`)}async function rn(t){return await M.patch(`v2/lesson/${t}/review/reject`)}async function cn(t){return await M.patch(`v2/lesson/${t}/review/edit`)}const D=[];for(let t=0;t<256;++t)D.push((t+256).toString(16).slice(1));function dn(t,n=0){return(D[t[n+0]]+D[t[n+1]]+D[t[n+2]]+D[t[n+3]]+"-"+D[t[n+4]]+D[t[n+5]]+"-"+D[t[n+6]]+D[t[n+7]]+"-"+D[t[n+8]]+D[t[n+9]]+"-"+D[t[n+10]]+D[t[n+11]]+D[t[n+12]]+D[t[n+13]]+D[t[n+14]]+D[t[n+15]]).toLowerCase()}let ge;const un=new Uint8Array(16);function pn(){if(!ge){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ge=crypto.getRandomValues.bind(crypto)}return ge(un)}const vn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ze={randomUUID:vn};function Ue(t,n,e){var s;if(ze.randomUUID&&!n&&!t)return ze.randomUUID();t=t||{};const i=t.random??((s=t.rng)==null?void 0:s.call(t))??pn();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,dn(i)}const hn={class:"flex items-center"},fn={class:"flex items-center mr-2"},gn=I({__name:"HighlightEditor",props:Be({index:{},usedSlots:{}},{highlight:{},highlightModifiers:{}}),emits:Be(["remove","save"],["update:highlight"]),setup(t,{emit:n}){const e=t,i=we(t,"highlight"),s=_(""),o=_(null),a=_(null),l=_(!1),u=he(()=>o.value!=null&&a.value!=null),d=n,r=()=>{d("remove",e.index)};G(()=>{i.value&&(s.value=i.value.id,o.value=i.value.module,a.value=i.value.slot,l.value=i.value.autoPut)}),E([o,a,l],()=>{o.value!=null&&d("save",e.index,s.value,o.value,a.value,l.value)}),E(u,w=>{w||(l.value=!1)});const m=_(["A","B","C","D","E","F"]),b=_(["8","9"]),g=_(["LED","switch","push-button","light-sensor","touch-sensor","potentiometer","encoder","motion-detector","microphone","climate-sensor","gyro-accel","buzzer","color-sensor","joystick","distance-sensor","servo","led-tower"]),h=he(()=>{if(o.value){if(o.value==="servo"||o.value==="led-tower"){const k=b.value.filter(S=>!(e.usedSlots??[]).includes(S));return a.value&&!k.includes(a.value)&&k.unshift(a.value),[null,...k]}const f=m.value.filter(v=>!(e.usedSlots??[]).includes(v));return a.value&&!f.includes(a.value)&&f.unshift(a.value),[null,...f]}const P=[...m.value,...b.value].filter(T=>!(e.usedSlots??[]).includes(T));return a.value&&!P.includes(a.value)&&P.unshift(a.value),[null,...P]}),C=he(()=>a.value?a.value==="8"||a.value==="9"?["servo","led-tower"]:g.value.filter(w=>w!=="servo"&&w!=="led-tower"):g.value);return(w,P)=>{const T=He,f=ve,v=Me,k=Ke,S=z;return c(),y("div",hn,[$("div",fn,[p(T,{modelValue:l.value,"onUpdate:modelValue":P[0]||(P[0]=B=>l.value=B),binary:"","input-id":"autoput",disabled:!u.value},null,8,["modelValue","disabled"]),P[3]||(P[3]=$("label",{for:"autoput",class:"ml-1 text-sm"},"auto",-1))]),p(k,null,{default:U(()=>[p(f,{modelValue:o.value,"onUpdate:modelValue":P[1]||(P[1]=B=>o.value=B),options:C.value,placeholder:"Select module",class:"place-content-center",size:"small"},null,8,["modelValue","options"]),p(v,{class:"h-[35px]"},{default:U(()=>P[4]||(P[4]=[$("div",null,"=>",-1)])),_:1}),p(f,{modelValue:a.value,"onUpdate:modelValue":P[2]||(P[2]=B=>a.value=B),options:h.value,placeholder:"Select slot",size:"small"},{option:U(({option:B})=>[$("span",{class:W(B===null?"text-gray-400":"")},ee(B===null?"[null]":B),3)]),value:U(({value:B})=>[$("span",{class:W(B===null?"text-gray-400":"")},ee(B===null?"[null]":B),3)]),_:1},8,["modelValue","options"])]),_:1}),p(S,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:r,class:"ml-2"})])}}}),mn={class:"flex flex-col gap-2"},bn=I({__name:"HighlightPanel",props:{neededModules:{default:[]},neededModulesModifiers:{}},emits:["update:neededModules"],setup(t){const n=we(t,"neededModules");function e(){n.value=[...n.value,{autoPut:!1,module:null,slot:null,id:Ue()}]}function i(o){n.value.splice(o,1)}function s(o,a,l,u,d){n.value[o].id=a,n.value[o].module=l,n.value[o].slot=u,n.value[o].autoPut=d}return(o,a)=>{const l=z,u=ut;return c(),x(u,{header:"Highlight slots & modules"},{default:U(()=>[$("div",mn,[(c(!0),y(K,null,Y(n.value,(d,r)=>(c(),y("div",{key:d.id},[p(gn,{highlight:n.value[r],"onUpdate:highlight":m=>n.value[r]=m,index:r,usedSlots:n.value.filter((m,b)=>{var g;return b!==r&&((g=n.value[b])==null?void 0:g.slot)!=null}).map(m=>m.slot),onRemove:i,onSave:s},null,8,["highlight","onUpdate:highlight","index","usedSlots"])]))),128))]),p(l,{icon:"pi pi-plus",variant:"text","aria-label":"Add",class:"self-center mt-2",onClick:e})]),_:1})}}}),yn={class:"flex"},wn={class:"h-[500px] flex flex-col w-full relative"},_n={class:"absolute right-2 bottom-2"},me=!1,$n=I({__name:"PibodyEditor",props:{id:{},content:{},data:{}},emits:["save-content-data","show-tester"],setup(t,{emit:n}){const e=Q(),i=t,s=n,o=_(""),a=_(""),l=_([]);let u=!0;_e(()=>{o.value=i.content.starting,a.value=i.content.answer,l.value=i.data.neededModules??[]}),E([o,a,l],()=>{if(u){u=!1;return}s("save-content-data",{starting:o.value,answer:a.value,hashed_answer:""},{neededModules:l.value.filter(r=>r.module!=null),tests:i.data.tests,includedCommandsForTests:i.data.includedCommandsForTests})},{deep:!0});function d(){s("show-tester",{lesson_id:e.params.id,unit_id:i.id.split("-")[1]})}return(r,m)=>{var C,w;const b=Ne,g=je,h=z;return c(),y(K,null,[$("div",yn,[$("div",wn,[p(g,{style:{height:"100%",border:"0.1px solid #808080",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",overflow:"hidden"}},{default:U(()=>[p(b,{size:50,minSize:20},{default:U(()=>[p(pe,{code:o.value,"onUpdate:code":m[0]||(m[0]=P=>o.value=P),runbuttons:!1,connectbuttons:me,id:i.id+"_",class:"h-full"},null,8,["code","id"])]),_:1}),p(b,{size:50,minSize:20},{default:U(()=>[p(pe,{code:a.value,"onUpdate:code":m[1]||(m[1]=P=>a.value=P),connectbuttons:me,"onUpdate:connectbuttons":m[2]||(m[2]=P=>me=P),id:i.id,class:"h-full"},null,8,["code","id"])]),_:1})]),_:1}),$("div",_n,[p(h,{label:`Tests (${((w=(C=i.data)==null?void 0:C.tests)==null?void 0:w.length)??0})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:d},null,8,["label"])]),p(A(Re),{id:i.id,class:"flex-grow max-h-40"},null,8,["id"])])]),p(bn,{neededModules:l.value,"onUpdate:neededModules":m[3]||(m[3]=P=>l.value=P),class:"mb-2",style:{borderTopLeftRadius:"0px",borderTopRightRadius:"0px"}},null,8,["neededModules"])],64)}}}),kn={class:"flex"},xn={class:"h-[500px] flex flex-col w-full relative"},An={class:"absolute right-2 bottom-2"},be=!1,Cn=I({__name:"CodeEditor",props:{id:{},code:{},data:{}},emits:["save-content-data","show-tester"],setup(t,{emit:n}){const e=Q(),i=t,s=n,o=_(""),a=_("");let l=!0;_e(()=>{o.value=i.code.starting,a.value=i.code.answer}),E([o,a],()=>{if(l){l=!1;return}s("save-content-data",{starting:o.value,answer:a.value,hashed_answer:""})});function u(){s("show-tester",{lesson_id:e.params.id,unit_id:i.id.split("-")[1]})}return(d,r)=>{var h,C;const m=Ne,b=je,g=z;return c(),y("div",kn,[$("div",xn,[p(b,{style:{height:"100%",border:"0.1px solid #808080",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",overflow:"hidden"}},{default:U(()=>[p(m,{size:50,minSize:20},{default:U(()=>[p(pe,{code:o.value,"onUpdate:code":r[0]||(r[0]=w=>o.value=w),runbuttons:!1,connectbuttons:be,id:i.id+"_",class:"h-full"},null,8,["code","id"])]),_:1}),p(m,{size:50,minSize:20},{default:U(()=>[p(pe,{code:a.value,"onUpdate:code":r[1]||(r[1]=w=>a.value=w),connectbuttons:be,"onUpdate:connectbuttons":r[2]||(r[2]=w=>be=w),id:i.id,class:"h-full"},null,8,["code","id"])]),_:1})]),_:1}),$("div",An,[p(g,{label:`Tests (${((C=(h=i.data)==null?void 0:h.tests)==null?void 0:C.length)??0})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:u},null,8,["label"])]),p(A(Re),{id:i.id,class:"flex-grow max-h-40"},null,8,["id"])])])}}}),Pn=["article","options","open","video","code","pibody","checklist","tinkercad"],O=Ze("lesson-edit-store",()=>{const t=et(),n=Ae(),{lang:e}=H(n),i=_(null),s=_(!1),o=_(!1),a=_(!1),l=_(!1),u=_(!1),d=_(!1);function r(f){a.value=f}async function m(f){try{s.value=!0;const{data:v}=await De.getLessonById(f,void 0,e.value);i.value=lt(v)}catch(v){t.add({severity:"error",summary:v.response.data.error,life:2e3})}finally{s.value=!1}}async function b(f,v){try{o.value=!0;const{data:k}=await Z.getUnitByIdandLessonId(f,v,e.value);return k}catch(k){t.add({severity:"error",summary:k.response.data.error,life:2e3})}finally{o.value=!1}}async function g(f){try{l.value=!0;const{data:v}=await Z.createUnitByLessonId(i.value.id,f);t.add({severity:"success",summary:v.message,life:2e3})}catch(v){t.add({severity:"error",summary:v.response.data.error,life:2e3})}finally{l.value=!1}}async function h(f,v,k){try{u.value=!0;const{data:S}=await Z.updateUnitByIdandLessonId(f,v,k,e.value);return S.unit_id}catch(S){t.add({severity:"error",summary:S.response.data.error,life:2e3})}finally{u.value=!1}}async function C(f,v){try{d.value=!0;const{data:k}=await Z.deleteUnitByIdandLessonId(f,v);t.add({severity:"success",summary:k.message,life:2e3})}catch(k){t.add({severity:"error",summary:k.response.data.error,life:2e3})}finally{d.value=!1}}async function w(f,v){try{s.value=!0;const{data:k}=await De.translateLesson(f,e.value,v,"chatgpt");t.add({severity:"success",summary:k.message,life:2e3})}catch(k){t.add({severity:"error",summary:k.response.data.error,life:2e3})}finally{s.value=!1}}async function P(f,v,k){try{u.value=!0;const{data:S}=await Z.translateUnit(f,v,k,"chatgpt");t.add({severity:"success",summary:S.message,life:2e3})}catch(S){t.add({severity:"error",summary:S.response.data.error,life:2e3})}finally{u.value=!1}}async function T(f,v,k){try{u.value=!0;const{data:S}=await Z.copyUnitContent(i.value.id,f,v,k);t.add({severity:"success",summary:S.message,life:2e3})}catch(S){t.add({severity:"error",summary:S.response.data.error,life:2e3})}finally{u.value=!1}}return{selectedLesson:i,isLessonLoading:s,isLessonSaving:a,isUnitLoading:o,isUnitCreating:l,isUnitUpdating:u,isUnitDeleting:d,setLessonSaving:r,loadLessonById:m,loadUnitByIdandLessonId:b,createUnit:g,updateUnitByIdandLessonId:h,deleteUnitByIdandLessonId:C,translateLessonToLang:w,translateUnitContent:P,copyUnitContent:T}}),Tn={class:"flex items-start"},Sn=I({__name:"MdEditor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const n=we(t,"modelValue"),e=tt({title:{title:"Title",icon:"v-md-icon-tip",action(o){o.insert(a=>{const l="# <center>",u="</center>",r=a||"Title";return{text:`${l}${r}${u}`,selected:r}})}},icons:{title:"Icons",icon:"v-md-icon-tip",menus:[{name:"Attention",text:"Attention",action(o){o.insert(()=>{const a='<span style="font-size: 20px">',l="</span>",u="⚠️";return{text:`${a}${u}${l}`,selected:u}})}},{name:"PiBody",text:"PiBody",action(o){o.insert(()=>{const a="<b>",l="</b>",u='<span style="color: #FF3F85"> Pi</span>Body';return{text:`${a}${u}${l}`,selected:u}})}},{name:"Run",text:"Run",action(o){o.insert(()=>({text:'<img src="https://static.artisan.education/lessons/image__c9041f3cc90b4dc188f9c2277f57f5a0..png" alt="Run" style="height: 1em;vertical-align: -0.2em;display:inline;">'}))}}]},style:{title:"Style",icon:"v-md-icon-tip",action(o){o.insert(a=>{const l='<span style="">',u="</span>",r=a||"placeholder";return{text:`${l}${r}${u}`,selected:r}})}},underline:{title:"Underline",icon:"v-md-icon-under-line",action(o){o.insert(a=>{const l='<span style="text-decoration: underline">',u="</span>",r=a||"placeholder";return{text:`${l}${r}${u}`,selected:r}})}},tip:{title:"Tip",icon:"v-md-icon-tip",action(o){o.insert(a=>{const l='<div style="background-color:#F3F5F7; padding: 20px; border-left: solid 8px #42B983">',u="</div>",r=a||"placeholder";return{text:`${l}${r}${u}`,selected:r}})}},note:{title:"Note",icon:"v-md-icon-tip",action(o){o.insert(a=>{const l='<div style="background-color:#F3F5F7; padding: 15px; border-left: solid 8px #FFCD6B; margin-bottom: 15px">',u="</div>",r=a||"placeholder";return{text:`${l}${r}${u}`,selected:r}})}},uploadfile:{title:"Upload File",icon:"v-md-icon-tip",action(o){const a=document.createElement("input");a.type="file",a.onchange=l=>{var d;const u=(d=l.target.files)==null?void 0:d[0];u&&s(u,o)},a.click()}}});async function i(o,a,l){const u=l[0],d=new FormData;d.append("file",u);try{const{data:r}=await Fe.uploadFile(d,"image"),m=r.source_url;a({url:m,desc:"desc",width:"auto",height:"auto"})}catch(r){console.log(r)}}async function s(o,a){const l=new FormData;l.append("file",o);try{const{data:u}=await Fe.uploadFile(l,"file"),d=u.source_url;a.insert(r=>({text:`[${r}](${d})`,selected:r}))}catch(u){console.error(u)}}return(o,a)=>{const l=ue("v-md-editor");return c(),y("div",Tn,[p(l,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=u=>n.value=u),mode:"edit",onChange:a[1]||(a[1]=u=>n.value=u),"left-toolbar":"undo redo clear | tip emoji todo-list | h bold italic strikethrough quote ul ol table hr link code image | title icons style underline tip note uploadfile","right-toolbar":"",toolbar:e,"disabled-menus":[],onUploadImage:i},null,8,["modelValue","toolbar"])])}}}),Le=pt(Sn,[["__scopeId","data-v-98b09236"]]),Un=I({__name:"ArticleEditor",props:{article:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=_("");let o=!0;return G(()=>{var a;s.value=((a=e.article)==null?void 0:a.text)??""}),E(s,()=>{if(o){o=!1;return}i("save-content-data",{text:s.value})},{flush:"post"}),(a,l)=>(c(),x(Le,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=u=>s.value=u)},null,8,["modelValue"]))}}),Ln={class:"flex flex-col gap-2"},In={class:"flex gap-1 text-gray-500"},Vn={class:"flex flex-col gap-1"},Bn=I({__name:"OptionsEditor",props:{optionsData:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=_(!1),o=_(!1),a=_(!1),l=_([]),u=_([]),d=_();let r=!0;G(()=>{var g,h,C,w,P,T;s.value=((g=e.optionsData)==null?void 0:g.shuffle)??!1,o.value=((h=e.optionsData)==null?void 0:h.feedback)??!1,a.value=((C=e.optionsData)==null?void 0:C.single)??!1,l.value=((w=e.optionsData)==null?void 0:w.options)??[],u.value=((P=e.optionsData)==null?void 0:P.answer)??[],d.value=e.optionsData&&e.optionsData.answer&&e.optionsData.answer.length>0?(T=e.optionsData)==null?void 0:T.answer[0]:void 0}),E([s,o,a,l,u,d],()=>{if(r){r=!1;return}i("save-content-data",{shuffle:s.value,feedback:o.value,single:a.value,options:l.value,answer:a.value?d.value?[d.value]:[]:u.value,hashed_answer:[]})},{deep:!0});function m(){l.value.push({id:Ue(),text:""})}function b(g){l.value=l.value.filter(h=>h.id!==g),u.value=u.value.filter(h=>h!==g),d.value==g&&(d.value=void 0)}return(g,h)=>{const C=Ge,w=vt,P=He,T=z;return c(),y("div",Ln,[$("div",In,[h[5]||(h[5]=$("div",null,"shuffle:",-1)),p(C,{modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=f=>s.value=f),class:"mr-2"},null,8,["modelValue"]),h[6]||(h[6]=$("div",null,"feedback:",-1)),p(C,{modelValue:o.value,"onUpdate:modelValue":h[1]||(h[1]=f=>o.value=f),class:"mr-2"},null,8,["modelValue"]),h[7]||(h[7]=$("div",null,"single:",-1)),p(C,{modelValue:a.value,"onUpdate:modelValue":h[2]||(h[2]=f=>a.value=f)},null,8,["modelValue"])]),$("div",Vn,[(c(!0),y(K,null,Y(l.value,f=>(c(),y("div",{key:f.id,class:"flex gap-2 items-center"},[a.value?(c(),x(w,{key:0,modelValue:d.value,"onUpdate:modelValue":h[3]||(h[3]=v=>d.value=v),value:f.id},null,8,["modelValue","value"])):(c(),x(P,{key:1,modelValue:u.value,"onUpdate:modelValue":h[4]||(h[4]=v=>u.value=v),value:f.id},null,8,["modelValue","value"])),p(Le,{modelValue:f.text,"onUpdate:modelValue":v=>f.text=v,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),p(T,{icon:"pi pi-trash",variant:"text",severity:"danger",size:"small",onClick:v=>b(f.id)},null,8,["onClick"])]))),128))]),p(T,{icon:"pi pi-plus",label:"Add option",variant:"text",size:"small",onClick:m,class:"self-center"})])}}}),Dn=I({__name:"OpenEditor",props:{open:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=_("");let o=!0;return G(()=>{var a;s.value=((a=e.open)==null?void 0:a.answer)??""}),E(s,()=>{if(o){o=!1;return}i("save-content-data",{answer:s.value,hashed_answer:""})}),(a,l)=>{const u=Ce;return c(),x(u,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=d=>s.value=d??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),Fn=I({__name:"VideoEditor",props:{video:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=_("");let o=!0;return G(()=>{var a;s.value=((a=e.video)==null?void 0:a.url)??""}),E(s,()=>{if(o){o=!1;return}i("save-content-data",{url:s.value})}),(a,l)=>{const u=Ce;return c(),x(u,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=d=>s.value=d??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),zn={class:"flex flex-col gap-2"},En={class:"flex flex-col gap-1"},Rn=I({__name:"ChecklistEditor",props:{id:{},checklist:{},data:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=$e(),i=Q(),s=t,o=n,a=_([]),l=_([]);let u=!0;G(()=>{a.value=s.checklist.options??[],l.value=s.data.checks??[];for(const b of l.value)a.value.some(g=>g.id===b.id)||a.value.push({id:b.id,text:""});a.value=a.value.filter(b=>l.value.some(g=>g.id===b.id))}),E([l,a],()=>{if(u){u=!1;return}o("save-content-data",{options:a.value},{checks:l.value})},{deep:!0});function d(){const b=Ue();l.value.push({id:b,solution:"",tests:[]}),a.value.push({id:b,text:""})}function r(b){a.value=a.value.filter(g=>g.id!==b),l.value=l.value.filter(g=>g.id!==b)}function m(b){const g=e.resolve({name:"tester2",params:{lesson_id:i.params.id,unit_id:s.id},query:{check_id:b}}).href;window.open(g,"_blank")}return(b,g)=>{const h=z;return c(),y("div",zn,[$("div",En,[(c(!0),y(K,null,Y(l.value,C=>(c(),y("div",{key:C.id,class:"flex gap-2 items-center"},[p(Le,{modelValue:(a.value.find(w=>w.id===C.id)||{}).text,"onUpdate:modelValue":w=>(a.value.find(P=>P.id===C.id)||{}).text=w,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),p(h,{label:`Tests (${C.tests.length})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:()=>m(C.id)},null,8,["label","onClick"]),p(h,{icon:"pi pi-trash",variant:"text",severity:"danger",size:"small",onClick:w=>r(C.id)},null,8,["onClick"])]))),128))]),p(h,{icon:"pi pi-plus",label:"Add todo",variant:"text",size:"small",onClick:d,class:"self-center"})])}}}),Nn=I({__name:"TinkercadEditor",props:{tinkercad:{}},emits:["save-content-data"],setup(t,{emit:n}){const e=t,i=n,s=_("");let o=!0;return G(()=>{var a;s.value=((a=e.tinkercad)==null?void 0:a.url)??""}),E(s,()=>{if(o){o=!1;return}i("save-content-data",{url:s.value})}),(a,l)=>{const u=Ce;return c(),x(u,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=d=>s.value=d??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),jn={class:"flex flex-col gap-4"},Hn={class:"flex justify-end gap-2 mt-4"},On=I({__name:"UnitTranslateSelector",props:{unit:{}},setup(t){const n=O(),{translateUnitContent:e}=n,i=t,s=_(!1),o=_(null),a=_(null),l=_(!1);async function u(){if(!(!a.value||!i.unit.id)){l.value=!0;try{await e(i.unit.id,o.value,a.value)}catch(d){console.error("❌ Translation error:",d)}finally{l.value=!1,s.value=!1}}}return(d,r)=>{const m=z,b=ve,g=ke;return c(),y("div",null,[p(m,{icon:"pi pi-language",variant:"text",severity:"contrast",onClick:r[0]||(r[0]=h=>s.value=!0)}),p(g,{visible:s.value,"onUpdate:visible":r[4]||(r[4]=h=>s.value=h),modal:"",header:`Translate unit content (${i.unit.id}-${i.unit.unitType})`,style:{width:"400px"}},{default:U(()=>[$("div",jn,[r[5]||(r[5]=$("label",{for:"sourceLang",class:"font-semibold"}," From language: ",-1)),p(b,{id:"sourceLang",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=h=>o.value=h),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),r[6]||(r[6]=$("label",{for:"targetLang",class:"font-semibold"}," To language: ",-1)),p(b,{id:"targetLang",modelValue:a.value,"onUpdate:modelValue":r[2]||(r[2]=h=>a.value=h),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),$("div",Hn,[p(m,{label:"Close",text:"",disabled:l.value,onClick:r[3]||(r[3]=h=>s.value=!1)},null,8,["disabled"]),p(m,{label:"Translate",disabled:!o.value||!a.value||l.value,loading:l.value,onClick:u},null,8,["disabled","loading"])])])]),_:1},8,["visible","header"])])}}}),Kn={class:"flex flex-col gap-4"},Mn={class:"flex justify-end gap-2 mt-4"},Gn=I({__name:"UnitCopySelector",props:{unit:{}},setup(t){const n=O(),{copyUnitContent:e}=n,i=t,s=_(!1),o=_(null),a=_(null),l=_(!1);async function u(){if(!(!a.value||!i.unit.id)){l.value=!0;try{await e(i.unit.id,o.value,a.value)}catch(d){console.error("❌ Copy error:",d)}finally{l.value=!1,s.value=!1}}}return(d,r)=>{const m=z,b=ve,g=ke;return c(),y("div",null,[p(m,{icon:"pi pi-copy",variant:"text",severity:"contrast",onClick:r[0]||(r[0]=h=>s.value=!0)}),p(g,{visible:s.value,"onUpdate:visible":r[4]||(r[4]=h=>s.value=h),modal:"",header:`Copy unit content (${i.unit.id}-${i.unit.unitType})`,style:{width:"400px"}},{default:U(()=>[$("div",Kn,[r[5]||(r[5]=$("label",{for:"sourceLang",class:"font-semibold"}," From language: ",-1)),p(b,{id:"sourceLang",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=h=>o.value=h),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),r[6]||(r[6]=$("label",{for:"targetLang",class:"font-semibold"}," To language: ",-1)),p(b,{id:"targetLang",modelValue:a.value,"onUpdate:modelValue":r[2]||(r[2]=h=>a.value=h),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),$("div",Mn,[p(m,{label:"Close",text:"",disabled:l.value,onClick:r[3]||(r[3]=h=>s.value=!1)},null,8,["disabled"]),p(m,{label:"Copy",disabled:!o.value||!a.value||l.value,loading:l.value,onClick:u},null,8,["disabled","loading"])])])]),_:1},8,["visible","header"])])}}}),qn={class:"bg-white rounded-lg border border-gray-200"},Jn={key:1,class:"flex flex-col h-full w-full"},Wn={class:"flex items-center gap-2 px-4 pt-2"},Qn={class:"text-sm"},Yn={class:"text-sm text-gray-500"},Xn={key:1,class:"flex-grow px-4 py-2"},Zn={class:"flex justify-end"},eo=I({__name:"UnitCard",props:{unit:{},loading:{type:Boolean}},emits:["delete","update"],setup(t,{emit:n}){const e=Ae(),{lang:i}=H(e),s=t,o=n,a=Q(),l=$e(),u=O(),{updateUnitByIdandLessonId:d,setLessonSaving:r,loadUnitByIdandLessonId:m}=u,b=_(!1),g=_(null),h=_(null);_e(async()=>{b.value=!0;const f=await m(s.unit.id,Number(a.params.id));f&&(g.value=f.content,h.value=f.data),b.value=!1});function C(f,v){r(!0),P(f,v)}function w(f){const v=l.resolve({name:"tester2",params:{lesson_id:f.lesson_id,unit_id:f.unit_id}}).href;window.open(v,"_blank")}const P=ft((f,v)=>{T(f,v)},1e3,{maxWait:5e3});async function T(f,v){const k=await d(s.unit.id,Number(a.params.id),{content:f,data:v});k&&o("update",s.unit,k),r(!1)}return(f,v)=>{const k=dt,S=z;return c(),y("div",qn,[f.loading?(c(),x(k,{key:0,class:"flex justify-center items-center w-10 h-full"})):(c(),y("div",Jn,[$("div",Wn,[$("div",Qn,ee(f.unit.id),1),$("div",Yn,ee(`${f.unit.unitType}`),1)]),b.value?(c(),x(k,{key:0,class:"flex justify-center items-center w-10 h-full"})):(c(),y("div",Xn,[f.unit.unitType=="article"?(c(),x(Un,{key:0,article:g.value,onSaveContentData:C},null,8,["article"])):f.unit.unitType=="options"?(c(),x(Bn,{key:1,"options-data":g.value,onSaveContentData:C},null,8,["options-data"])):f.unit.unitType=="open"?(c(),x(Dn,{key:2,open:g.value,onSaveContentData:C},null,8,["open"])):f.unit.unitType=="video"?(c(),x(Fn,{key:3,video:g.value,onSaveContentData:C},null,8,["video"])):f.unit.unitType=="tinkercad"?(c(),x(Nn,{key:4,tinkercad:g.value,onSaveContentData:C},null,8,["tinkercad"])):f.unit.unitType=="checklist"?(c(),x(Rn,{key:5,id:`${s.unit.id}`,checklist:g.value,data:h.value,onSaveContentData:C},null,8,["id","checklist","data"])):s.unit.unitType=="code"?(c(),x(A(Cn),{key:6,id:`code-${s.unit.id}-${A(i)}`,code:g.value,data:h.value,onSaveContentData:C,onShowTester:w},null,8,["id","code","data"])):s.unit.unitType=="pibody"?(c(),x(A($n),{key:7,id:`pibody-${s.unit.id}-${A(i)}`,content:g.value,data:h.value,onSaveContentData:C,onShowTester:w},null,8,["id","content","data"])):V("",!0)])),$("div",Zn,[p(Gn,{unit:s.unit},null,8,["unit"]),p(On,{unit:s.unit},null,8,["unit"]),p(S,{icon:"pi pi-trash",size:"small",severity:"danger",variant:"text",onClick:v[0]||(v[0]=xe(B=>o("delete",s.unit),["stop"]))})])]))])}}}),to={class:"group w-full relative"},no={class:"flex"},ye=I({__name:"AddUnitButton",props:{unitId:{},showAddGroup:{type:Boolean},hided:{type:Boolean}},emits:["add-group-divider"],setup(t,{emit:n}){const e=t,i=n,s=Q(),o=O(),{loadLessonById:a,createUnit:l}=o,u=_(),d=_(Pn.map(m=>({label:m,command:async()=>{await l({unit_type:m,prev_unit_id:e.unitId??void 0}),await a(Number(s.params.id))}}))),r=m=>{u.value.toggle(m)};return(m,b)=>{const g=mt,h=z,C=gt;return c(),y(K,null,[$("div",to,[b[1]||(b[1]=$("div",{class:"h-3"},null,-1)),$("div",{class:W(["absolute left-1/2 -translate-x-1/2 -top-5 group-hover:block mt-[9px] w-full",m.hided?"hidden":""])},[$("div",no,[p(g,{class:"w-7",type:"dashed"}),p(g,{class:"flex-grow",type:"dashed"}),p(h,{icon:"pi pi-plus",class:"flex self-end shadow-xl h-7",size:"small",onClick:r}),p(g,{class:"flex-grow",type:"dashed"}),m.showAddGroup?(c(),x(h,{key:0,icon:"pi pi-arrow-up-right-and-arrow-down-left-from-center",class:"flex self-end h-7",size:"small",variant:"text",onClick:b[0]||(b[0]=w=>i("add-group-divider"))})):(c(),x(g,{key:1,class:"w-7",type:"dashed"}))])],2)]),p(C,{ref_key:"menu",ref:u,model:d.value,popup:!0},null,8,["model"])],64)}}}),oo=I({__name:"RemoveGroupButton",emits:["remove-group-divider"],setup(t,{emit:n}){const e=n;return(i,s)=>{const o=z;return c(),x(o,{icon:"pi pi-arrow-down-left-and-arrow-up-right-to-center",severity:"danger",class:"flex self-end h-7 w-7",size:"small",variant:"text",onClick:s[0]||(s[0]=xe(a=>e("remove-group-divider"),["stop"]))})}}}),ao={class:"flex flex-col gap-2"},io={class:"w-full flex justify-between gap-2 mr-4"},lo={class:"flex flex-row"},so={class:"flex flex-col p-2 rounded-lg bg-slate-50"},ro=I({__name:"UnitsView",props:{pages:{}},setup(t){const n=t,e=Q(),i=nt(),s=O(),{isUnitDeleting:o}=H(s),{loadLessonById:a,createUnit:l,deleteUnitByIdandLessonId:u}=s,d=_(null);async function r(v){await l({unit_type:"group-divider",prev_unit_id:v.id}),await a(Number(e.params.id))}async function m(){await l({unit_type:"page-divider"}),await a(Number(e.params.id))}async function b(v){await l({unit_type:"page-divider",prev_unit_id:v}),await u(v,Number(e.params.id)),await a(Number(e.params.id))}async function g(v){await u(v,Number(e.params.id)),await a(Number(e.params.id))}function h(v){d.value=v,i.require({...ct,message:"Are you sure you want to delete this lesson?",accept:async()=>{await u(v.id,Number(e.params.id)),await a(Number(e.params.id))}})}function C(v,k){k>v.id&&(v.id=k)}const w=Number(e.params.id),P=`openedPanels-${w}`,T=_({});G(async()=>{const v=localStorage.getItem(P);v&&(T.value=JSON.parse(v)),await ot(),setTimeout(()=>{const k=localStorage.getItem(`lastOpenedGroup-${w}`);if(k){const S=document.getElementById(`group-${k}`);if(S){S.scrollIntoView({behavior:"smooth"});return}}},1e3)}),E(T,v=>{localStorage.setItem(P,JSON.stringify(v))},{deep:!0});function f(v,k){T.value[k]=v,T.value[k].length>0&&localStorage.setItem(`lastOpenedGroup-${w}`,v[v.length-1])}return(v,k)=>{const S=z,B=Te,le=Pe,se=Se,re=Oe;return c(),y("div",ao,[(c(!0),y(K,null,Y(n.pages,q=>(c(),x(re,{value:T.value[q.id]||[],"onUpdate:value":F=>f(F,q.id),multiple:"",key:q.id,class:"flex flex-col gap-2 bg-white p-4 rounded-lg shadow-lg"},{default:U(()=>[(c(!0),y(K,null,Y(q.groups,(F,ne)=>(c(),x(se,{key:F.id,value:F.id,id:`group-${F.id}`},{default:U(()=>[p(B,null,{default:U(()=>[$("div",io,[$("div",null,"Step: "+ee(ne),1),$("div",lo,[ne!=0?(c(),x(S,{key:0,icon:"pi pi-file-plus",class:"flex self-end h-7 w-7",size:"small",variant:"text",onClick:xe(R=>b(F.id),["stop"])},null,8,["onClick"])):V("",!0),F.id!=-1?(c(),x(oo,{key:1,onRemoveGroupDivider:R=>g(F.id)},null,8,["onRemoveGroupDivider"])):V("",!0)])])]),_:2},1024),p(le,{class:"flex flex-col"},{default:U(()=>[$("div",so,[(c(!0),y(K,null,Y(F.units,(R,ce)=>{var oe;return c(),y("div",{key:R.id},[ce==0?(c(),x(ye,{key:0,hided:!0,"unit-id":F.id,"show-add-group":!1},null,8,["unit-id"])):V("",!0),p(eo,{unit:R,loading:((oe=d.value)==null?void 0:oe.id)===R.id&&A(o),onDelete:de=>h(R),onUpdate:C},null,8,["unit","loading","onDelete"]),p(ye,{hided:!0,"unit-id":R.id,"show-add-group":!0,onAddGroupDivider:de=>r(R)},null,8,["unit-id","onAddGroupDivider"])])}),128)),F.units.length==0?(c(),x(ye,{key:0,hided:!1,"unit-id":F.id,"show-add-group":!1},null,8,["unit-id"])):V("",!0)])]),_:2},1024)]),_:2},1032,["value","id"]))),128))]),_:2},1032,["value","onUpdate:value"]))),128)),p(S,{id:"newpage",icon:"pi pi-plus",label:"New page",variant:"text",size:"small",class:"flex self-center",onClick:k[0]||(k[0]=q=>m())})])}}}),co={class:"w-[24px] h-[24px]"},uo={key:0,class:"flex items-center"},po={key:0,class:"material-icons text-gray-500"},vo={key:1,class:"material-icons text-gray-500"},ho={key:1},fo={class:"material-icons text-gray-500"},go=I({__name:"AutoSaveCloud",setup(t){const n=O(),{selectedLesson:e,isLessonSaving:i}=H(n);return(s,o)=>{var l;const a=bt;return c(),y("div",co,[(l=A(e))!=null&&l.editable?(c(),y("div",uo,[A(i)?ae((c(),y("span",vo,o[1]||(o[1]=[fe("cloud_sync")]))),[[a,"Saving...",void 0,{bottom:!0}]]):ae((c(),y("span",po,o[0]||(o[0]=[fe("cloud_done")]))),[[a,"Saved",void 0,{bottom:!0}]])])):(c(),y("div",ho,[ae((c(),y("span",fo,o[2]||(o[2]=[fe("cloud_off")]))),[[a,"Save not allowed",void 0,{bottom:!0}]])]))])}}}),mo={key:0},bo={key:0},yo={key:1},wo={key:0},_o={key:1},$o={key:2},ko={key:0,class:"flex gap-1"},xo={key:3},Ao={key:0},Co={key:4},Po={key:0,class:"flex gap-1"},To={key:5},So={key:0,class:"flex gap-1"},Uo={key:6},Lo={key:0,class:"flex gap-1"},Io=I({__name:"StageButtons",setup(t){const n=Q(),e=at(),{user:i}=H(e),s=O(),{selectedLesson:o}=H(s),a=_(!1),l=_(!1);async function u(){a.value=!0;try{await J.sendLessonForReview(n.params.id.toString()),window.location.reload()}catch(w){console.log(w)}finally{a.value=!1}}async function d(){a.value=!0;try{await J.cancelLessonReview(n.params.id.toString()),window.location.reload()}catch(w){console.log(w)}finally{a.value=!1}}async function r(){a.value=!0;try{await J.startLessonReview(n.params.id.toString()),window.location.reload()}catch(w){console.log(w)}finally{a.value=!1}}async function m(){a.value=!0;try{await J.acceptLesson(n.params.id.toString()),window.location.reload()}catch(w){console.log(w)}finally{a.value=!1}}async function b(){l.value=!0;try{await J.rejectLesson(n.params.id.toString()),window.location.reload()}catch(w){console.log(w)}finally{l.value=!1}}async function g(){a.value=!0;try{await J.editLesson(n.params.id.toString()),window.location.reload()}catch(w){console.log(w)}finally{a.value=!1}}async function h(){a.value=!0;try{await J.publishLesson(n.params.id.toString()),window.location.reload()}catch(w){console.log(w)}finally{a.value=!1}}async function C(){l.value=!0;try{await J.hideLesson(n.params.id.toString()),window.location.reload()}catch(w){console.log(w)}finally{l.value=!1}}return(w,P)=>{var f,v,k,S,B,le,se,re,q,F,ne,R,ce,oe,de;const T=z;return((f=A(o))==null?void 0:f.stage)=="prepare_for_submission"?(c(),y("div",mo,[((v=A(i))==null?void 0:v.user_type)=="contributor"?(c(),y("div",bo,[p(T,{label:"Send for review",severity:"info",size:"small",onClick:u,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((k=A(o))==null?void 0:k.stage)=="waiting_for_review"?(c(),y("div",yo,[((S=A(i))==null?void 0:S.user_type)=="contributor"?(c(),y("div",wo,[p(T,{label:"Cancel submission",severity:"danger",size:"small",onClick:d,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):((B=A(i))==null?void 0:B.user_type)=="editor"?(c(),y("div",_o,[p(T,{label:"Start review",severity:"info",size:"small",onClick:r,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((le=A(o))==null?void 0:le.stage)=="in_review"?(c(),y("div",$o,[((se=A(i))==null?void 0:se.user_type)=="editor"?(c(),y("div",ko,[p(T,{label:"Reject",severity:"danger",size:"small",onClick:b,disabled:a.value||l.value,loading:l.value},null,8,["disabled","loading"]),p(T,{label:"Accept",size:"small",onClick:m,disabled:a.value||l.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((re=A(o))==null?void 0:re.stage)=="rejected"?(c(),y("div",xo,[((q=A(i))==null?void 0:q.user_type)=="contributor"?(c(),y("div",Ao,[p(T,{label:"Edit submission",severity:"info",size:"small",onClick:g,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((F=A(o))==null?void 0:F.stage)=="ready_for_publish"?(c(),y("div",Co,[((ne=A(i))==null?void 0:ne.user_type)=="editor"?(c(),y("div",Po,[A(o).createdBy!=Number(A(i).user_id)?(c(),x(T,{key:0,label:"Reject",severity:"danger",size:"small",onClick:b,disabled:a.value||l.value,loading:l.value},null,8,["disabled","loading"])):V("",!0),p(T,{label:"Publish",size:"small",onClick:h,disabled:a.value||l.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):((R=A(o))==null?void 0:R.stage)=="published"?(c(),y("div",To,[((ce=A(i))==null?void 0:ce.user_type)=="editor"?(c(),y("div",So,[p(T,{label:"Hide",severity:"danger",size:"small",onClick:C,disabled:a.value||l.value,loading:l.value},null,8,["disabled","loading"])])):V("",!0)])):((oe=A(o))==null?void 0:oe.stage)=="in_modify"?(c(),y("div",Uo,[((de=A(i))==null?void 0:de.user_type)=="editor"?(c(),y("div",Lo,[p(T,{label:"Hide",severity:"danger",size:"small",onClick:C,disabled:a.value||l.value,loading:l.value},null,8,["disabled","loading"]),p(T,{label:"Publish",size:"small",onClick:h,disabled:a.value||l.value,loading:a.value},null,8,["disabled","loading"])])):V("",!0)])):V("",!0)}}}),Vo={key:0},Bo=I({__name:"StageStatus",setup(t){const n=O(),{selectedLesson:e}=H(n);return(i,s)=>{const o=yt;return A(e)?(c(),y("div",Vo,[["prepare_for_submission","waiting_for_review","in_review","in_modify"].includes(A(e).stage)?(c(),x(o,{key:0,label:A(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-clock",pt:{icon:{class:"text-yellow-500"}},class:"h-8 bg-yellow-50 w-fit"},null,8,["label"])):["ready_for_publish","published"].includes(A(e).stage)?(c(),x(o,{key:1,label:A(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-check-circle",pt:{icon:{class:"text-green-500"}},class:"h-8 bg-green-50 w-fit"},null,8,["label"])):["rejected"].includes(A(e).stage)?(c(),x(o,{key:2,label:A(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-times-circle",pt:{icon:{class:"text-red-500"}},class:"h-8 bg-red-50 w-fit"},null,8,["label"])):V("",!0)])):V("",!0)}}}),Do={class:"flex flex-col gap-4"},Fo={class:"flex justify-end gap-2 mt-4"},zo=I({__name:"LessonTranslateSelector",setup(t){const n=O(),{translateLessonToLang:e}=n,{selectedLesson:i}=H(n),s=_(!1),o=_(null),a=_(!1);async function l(){var u;if(!(!o.value||!((u=i.value)!=null&&u.id))){a.value=!0;try{console.log("▶️ Translating lesson",i.value.id,"→",o.value),await e(i.value.id,o.value),console.log("✅ Translation complete")}catch(d){console.error("❌ Translation error:",d)}finally{a.value=!1,s.value=!1}}}return(u,d)=>{const r=z,m=ve,b=ke;return c(),y("div",null,[p(r,{icon:"pi pi-language",variant:"text",severity:"contrast",onClick:d[0]||(d[0]=g=>s.value=!0)}),p(b,{visible:s.value,"onUpdate:visible":d[3]||(d[3]=g=>s.value=g),modal:"",header:"Translate lesson",style:{width:"400px"}},{default:U(()=>[$("div",Do,[d[4]||(d[4]=$("label",{for:"targetLang",class:"font-semibold"}," Choose language to translate to: ",-1)),p(m,{id:"targetLang",modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=g=>o.value=g),options:A(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),$("div",Fo,[p(r,{label:"Cancel",text:"",onClick:d[2]||(d[2]=g=>s.value=!1)}),p(r,{label:"Translate",disabled:!o.value,loading:a.value,onClick:l},null,8,["disabled","loading"])])])]),_:1},8,["visible"])])}}}),Eo={class:"flex flex-col items-center"},Ro={class:"flex justify-between items-center w-full min-h-16 border-b border-gray-200 px-8 shadow-md gap-8"},No={class:"flex items-center gap-4"},jo={class:"flex items-center gap-4"},Ho={class:"w-full h-full max-w-screen-lg px-4 md:px-28 py-8"},Oo={class:"fixed top-32 right-0 pl-2 pr-4 py-2 bg-white rounded-tl-lg rounded-bl-lg shadow-md z-[1000] border border-gray-200 flex flex-col items-center gap-4"},ka=I({__name:"LessonEditPage",setup(t){const n=Q(),e=$e(),i=Ae(),{lang:s}=H(i),o=O(),{selectedLesson:a}=H(o),{loadLessonById:l}=o;G(()=>l(Number(n.params.id))),E(s,async(r,m)=>{r!==m&&a.value&&await l(a.value.id)});const u=()=>{let r="#";n.path.endsWith("/edit")&&a.value&&(a.value.lessonType==="project"?r=n.path.replace("/lesson/","/project/").replace(/\/edit$/,""):r=n.path.replace(/\/edit$/,"")),window.open(r,"_blank")};function d(){window.history.length>2?e.go(-1):e.push("/v2/routes")}return(r,m)=>{var g;const b=z;return c(),y("div",Eo,[$("div",Ro,[$("div",No,[p(b,{icon:"pi pi-times",variant:"text",severity:"contrast",onClick:d}),p(Bo)]),$("div",jo,[p(Io)])]),$("div",Ho,[(c(),x(ro,{key:A(s),pages:(g=A(a))==null?void 0:g.pages},null,8,["pages"]))]),$("div",Oo,[p(go),p(A(it)),p(b,{icon:"pi pi-eye",variant:"text",severity:"contrast",onClick:u}),p(zo)])])}}});export{ka as default};
