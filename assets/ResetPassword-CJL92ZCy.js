import{h as N,z as u,s as j}from"./index-TV8PNjRI.js";import{s as A}from"./index-BnwJd8zK.js";import{s as H}from"./index-rUH2s8Wy.js";import{s as R}from"./index-2vWuK4nX.js";import{b as S,a as q,u as T,r as k,o,c as n,h as a,j as e,i as $,y as c,t as m,p as P,F as f,l as V,q as z,C as D,v as E,aw as I,w as U}from"./index-BKHARNaj.js";import{_ as Z}from"./AuthHeader.vue_vue_type_script_setup_true_lang-C7ZnbFMY.js";import"./index-D2UfNRXk.js";import"./index-DLOQYNUR.js";import"./index-o2Q_4Jq5.js";import"./index-DUiGxFAo.js";import"./logo-D1-3uCnC.js";const G={class:"card flex flex-col items-center pt-4"},J={class:"flex flex-1 items-center justify-center my-4"},K={class:"text-4xl font-semibold px-2 mr-4"},O={class:"flex flex-col gap-1"},Q={for:"password"},W={class:"my-0 flex flex-col gap-1"},X={class:"flex flex-col gap-1"},Y={for:"confirm_password"},ss={class:"my-0 flex flex-col gap-1"},us=S({__name:"ResetPassword",setup(es){const{t}=q(),g=T(),B=D(),_=E(),l=k(!1),C=k({password:""}),F=N(u.object({password:u.string().min(8,{message:t("pages.login.min8chars")}).max(100,{message:t("pages.login.max100chars")}).refine(s=>/[a-z]/.test(s),{message:t("pages.login.mustHaveLowercase")}).refine(s=>/[A-Z]/.test(s),{message:t("pages.login.mustHaveUppercase")}).refine(s=>/[0-9]/.test(s),{message:t("pages.login.mustHaveNumber")}),confirm_password:u.string()}).refine(s=>s.password===s.confirm_password,{message:t("pages.login.passMustMatch"),path:["confirm_password"]})),M=async s=>{if(!l.value&&s.valid){l.value=!0;try{const{data:r}=await I.resetPassword(B.query.token,s.states.password.value);_.replace({name:"login"}),g.add({severity:"success",summary:r.message,life:3e3})}catch(r){g.add({severity:"error",summary:r.response.data.error,life:3e3})}finally{l.value=!1}}};return(s,r)=>{const w=U,v=R,y=H,b=A,L=j;return o(),n(f,null,[a(Z),e("div",G,[a(w,{label:s.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:r[0]||(r[0]=i=>$(_).replace({name:"login"}))},null,8,["label"]),a(L,{initialValues:C.value,resolver:$(F),onSubmit:M,class:"flex flex-col gap-4 w-full sm:w-80 sm:px-0 px-8"},{default:c(i=>{var x,h;return[e("div",J,[e("p",K,m(s.$t("pages.login.newPassword")),1)]),e("div",O,[a(y,{variant:"on"},{default:c(()=>[a(v,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),e("label",Q,m(s.$t("pages.login.newPassword")),1)]),_:1}),(x=i.password)!=null&&x.invalid?(o(),P(b,{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>[e("ul",W,[(o(!0),n(f,null,V(i.password.errors,(p,d)=>(o(),n("li",{key:d},m(p.message),1))),128))])]),_:2},1024)):z("",!0)]),e("div",X,[a(y,{variant:"on"},{default:c(()=>[a(v,{id:"confirm_password",name:"confirm_password",feedback:!1,toggleMask:"",fluid:""}),e("label",Y,m(s.$t("pages.login.confirmPassword")),1)]),_:1}),(h=i.confirm_password)!=null&&h.invalid?(o(),P(b,{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>[e("ul",ss,[(o(!0),n(f,null,V(i.confirm_password.errors,(p,d)=>(o(),n("li",{key:d},m(p.message),1))),128))])]),_:2},1024)):z("",!0)]),a(w,{type:"submit",label:s.$t("pages.login.save"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{us as default};
