import{s as j}from"./index-CkgExVBS.js";import{d as y,u as w,r as v,b as x,o,c as a,j as r,h as d,y as b,k as P,t as l,q as g,p as h,n as k,v as $,e as I,x as S,g as B,i as _,F as C,l as N}from"./index-B13zA5hA.js";import{_ as U}from"./MainHeader.vue_vue_type_script_setup_true_lang-BW5MkYdI.js";import{P as D}from"./projectApi-DhkobfFy.js";import{m as T}from"./mapUnitFromDto-DVWJHO4f.js";import{t as A}from"./transformUnitDtosToPages-hsgZNhAG.js";import{s as F}from"./index-on-ub--y.js";import{s as V}from"./index-BR-BkdfI.js";import{s as L}from"./index-CRh1zj3o.js";import"./index-ByhQZh9O.js";import"./index-DlvIKnHl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-D1-3uCnC.js";const q=e=>{var t;return{accessStatus:e.access_status,accessType:e.access_type,createdAt:new Date(e.created_at),createdBy:e.created_by,description:e.description,id:e.id,lessonType:e.lesson_type,levelId:e.level_id,name:e.name,previewImageUrl:e.preview_image_url,reviewedBy:e.reviewed_by,sourceImageUrl:e.source_image_url,stage:e.stage,studentProgress:e.student_progress,pages:A(e.units??[]),units:((t=e.units)==null?void 0:t.map(T))??[],lastAccessedUnit:e.last_accessed_unit,updatedAt:new Date(e.updated_at),updatedBy:e.updated_by,editable:e.editable,routeId:e.route_id??0,routeName:e.route_name??"",levelName:e.level_name??""}},R=y("projects-store",()=>{const e=w(),t=v([]),c=v(!1);async function i(){try{c.value=!0;const{data:s}=await D.getProjects();t.value=(s==null?void 0:s.map(q))??[]}catch(s){e.add({severity:"error",summary:s.response.data.error,life:2e3})}finally{c.value=!1}}return{projects:t,isLoading:c,loadProjects:i}}),z={class:"flex gap-2 w-full h-full"},E={class:"flex flex-col justify-between items w-full"},M={class:"flex flex-wrap text-xs font-semibold"},G={class:"flex flex-col gap-[2px] justify-center"},H={class:"text-overline-small"},J={class:"flex items-center gap-2"},K={key:0,class:"text-purple-500 h-[22px] w-4"},O={class:"text-body-large-semibold"},Q={class:"pt-[10px] flex flex-col gap-1"},W={class:"action-small-bold text-blue400"},X={key:0},Y={key:1},Z={key:2},ee=x({__name:"ProjectCard",props:{project:{}},setup(e){const t=e,c=$(),i=()=>{t.project.accessStatus==="available"&&c.push({name:"project",params:{id:t.project.id},query:{route_id:t.project.routeId}})};return(s,p)=>{const n=L,u=V,m=F;return o(),a("div",{class:k(["relative flex flex-col rounded-lg h-[160px] w-[348px] pt-2 px-3 cursor-pointer bg-blue50",{"cursor-not-allowed opacity-60 pointer-events-none":s.project.accessStatus==="progress_restriction"}]),onClick:i},[r("div",z,[r("div",E,[r("div",M,[d(n,null,{default:b(()=>[P(l(s.project.routeName),1)]),_:1})]),r("div",G,[r("div",H,l(s.project.description),1),r("div",J,[s.project.accessStatus==="premium_restriction"?(o(),a("div",K,p[0]||(p[0]=[r("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):g("",!0),r("div",O,l(s.project.name),1)])])]),t.project.sourceImageUrl?(o(),h(u,{key:0,src:t.project.sourceImageUrl,alt:"Image",class:"min-w-[120px] min-h-[120px] w-[120px] h-[120px]"},null,8,["src"])):g("",!0)]),r("div",Q,[r("div",W,[s.project.studentProgress==0?(o(),a("span",X,l(s.$t("start")),1)):s.project.studentProgress==100?(o(),a("span",Y,l(s.$t("done")),1)):(o(),a("span",Z,l(s.$t("inProgress")),1))]),d(m,{value:s.project.studentProgress,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:"var(--color-blue400)"},background:"var(--color-blue200)"}},null,8,["value"])])],2)}}}),se={class:"flex flex-col items-center"},te={class:"w-full flex max-w-[1280px] px-8 py-10 justify-start"},re={class:"text-heading-2-bold text-neutral900"},oe={class:"w-full max-w-[1280px] px-8 pb-10"},ae={key:1,class:"flex justify-center"},ce={key:2,class:"flex flex-col gap-8"},le={class:"flex flex-wrap gap-6 bg-white p-6 rounded-2xl"},ye=x({__name:"ProjectsPage",setup(e){const t=R(),{projects:c,isLoading:i}=I(t),{loadProjects:s}=t,p=S(()=>{var n;return(n=c.value)==null?void 0:n.filter(u=>u.stage==="published")});return B(()=>s()),(n,u)=>{const m=j;return o(),a("div",se,[d(_(U)),r("div",te,[r("div",re,l(n.$t("projects")),1)]),r("div",oe,[_(i)?(o(),h(m,{key:0,class:"flex justify-center"})):_(c)?(o(),a("div",ce,[r("div",le,[(o(!0),a(C,null,N(p.value,f=>(o(),a("div",{key:f.id},[d(ee,{project:f},null,8,["project"])]))),128))])])):(o(),a("div",ae,"No projects yet"))])])}}});export{ye as default};
