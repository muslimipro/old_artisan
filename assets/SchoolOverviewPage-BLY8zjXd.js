import{s as N}from"./index-fTHW6IpW.js";import{b as P,u as V,f as D,e as F,r as o,g as I,o as p,c as R,h as s,D as u,p as g,q as y,i as a,j,F as L,C as T,v as U,w as q}from"./index-BNOYZ_6B.js";import{s as A}from"./index-C4TRSEyf.js";import{_ as E,a as M}from"./ExportProgressDialog.vue_vue_type_script_setup_true_lang-Cqjc-zuW.js";import{_ as O}from"./SchoolInfo.vue_vue_type_script_setup_true_lang-KAqMZgRD.js";import{S as h}from"./schoolApi-DwEANFt_.js";import{m as z}from"./mapClassFromDto-DKLLYB1T.js";import"./index-B1Mvx7RV.js";import"./index-DgBnIJKd.js";import"./index-D2Pxgbwe.js";import"./index-DRhII8mO.js";import"./index-EmM3D-m5.js";import"./index-nGXgVu-X.js";import"./index-SW19hvKn.js";import"./index-DlyffbqJ.js";import"./index-lQ_mdVYJ.js";import"./index-BYGD4QnV.js";import"./index-Ym3p4DeK.js";import"./index-CFd-0ZWH.js";import"./index-DpCksB_j.js";import"./index-C_e8lvdO.js";import"./index-BTepqiGI.js";import"./mapRouteFromDto-Buskxv6p.js";import"./mapLessonFromDto-CG19vVOp.js";import"./mapUnitFromDto-DJ2zlrQL.js";import"./transformUnitDtosToPages-4blM3N0G.js";import"./lessonType-v5Tmr0TL.js";import"./mapStudentFromDto-D4MSietx.js";import"./index-CAA1rma3.js";import"./index-Cx1qQ_Fl.js";const G={class:"flex gap-2"},$e=P({__name:"SchoolOverviewPage",setup(H){const C=V(),d=T(),x=U(),S=D(),{userInfo:k}=F(S),i=o(!1),t=o(null);async function $(){try{i.value=!0;const{data:e}=await h.getSchoolById(Number(d.params.id));t.value=e}catch(e){console.log(e)}finally{i.value=!1}}const n=o([]),m=o(!1);async function B(){try{m.value=!0;const{data:e}=await h.getSchoolClassesById(Number(d.params.id));n.value=(e==null?void 0:e.map(z))??[]}catch(e){C.add({severity:"error",summary:e.response.data.error,life:2e3})}finally{m.value=!1}}I(()=>{$(),B()});const c=o(!1);return(e,r)=>{var v;const b=A,f=q,w=N;return p(),R(L,null,[s(w,{class:"flex-grow flex flex-col gap-2"},{default:u(()=>[i.value?(p(),g(b,{key:0,class:"flex justify-center"})):y("",!0),t.value?(p(),g(a(O),{key:1,school:t.value},null,8,["school"])):y("",!0),s(a(E),{classes:n.value,loading:m.value},{"header-extra":u(()=>[s(f,{label:e.$t("exportProgress"),icon:"pi pi-upload",severity:"info",variant:"outlined",class:"mr-2",onClick:r[0]||(r[0]=l=>c.value=!0)},null,8,["label"])]),actions:u(({row:l})=>[j("div",G,[s(f,{icon:"pi pi-angle-right",outlined:"",rounded:"",severity:"info",onClick:J=>{var _;return a(x).push({name:((_=a(k))==null?void 0:_.user_type)=="super_admin"?"admin-class":"supervisor-class",params:{id:l.id}})}},null,8,["onClick"])])]),_:1},8,["classes","loading"])]),_:1}),s(a(M),{"model-value":c.value,"onUpdate:modelValue":r[1]||(r[1]=l=>c.value=l),classes:n.value,"school-name":((v=t.value)==null?void 0:v.title_en)??""},null,8,["model-value","classes","school-name"])],64)}}});export{$e as default};
